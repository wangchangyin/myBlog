(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{466:function(a,n,e){"use strict";e.r(n);var s=e(8),t=Object(s.a)({},(function(){var a=this,n=a.$createElement,e=a._self._c||n;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"ssm的问题"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#ssm的问题"}},[a._v("#")]),a._v(" SSM的问题")]),a._v(" "),e("h2",{attrs:{id:"_1-配置了dispatcherservlet静态资源被拦截"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_1-配置了dispatcherservlet静态资源被拦截"}},[a._v("#")]),a._v(" 1.配置了DispatcherServlet静态资源被拦截")]),a._v(" "),e("p",[a._v("SpringMVC.xml不拦截static下面的静态资源")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('    \x3c!-- 配置Json注解驱动 --\x3e\n    <mvc:annotation-driven/>\n    \x3c!--静态资源映射--\x3e\n    <mvc:resources location="/static/" mapping="/static/**" />\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("h2",{attrs:{id:"_2-aop拦截controller的请求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#_2-aop拦截controller的请求"}},[a._v("#")]),a._v(" 2.AOP拦截controller的请求")]),a._v(" "),e("p",[a._v("问题：在Spring的配置文件中配置了AOP的相关配置，始终没法拦截controller的请求")]),a._v(" "),e("blockquote",[e("p",[a._v("原因：")]),a._v(" "),e("p",[e("strong",[a._v("因为Spring的Bean扫描和Spring-MVC的Bean扫描是分开的")]),a._v(", 两者的Bean位于两个不同的Application, 而且Spring-MVC的Bean扫描要早于Spring的Bean扫描, 所以当Controller Bean生成完成后, 再执行Spring的Bean扫描,Spring会发现要被AOP代理的Controller Bean已经在容器中存在, 配置AOP就无效了.")]),a._v(" "),e("p",[a._v("同样这样的情况也存在于数据库事务中, 如果Service的Bean扫描配置在spring-mvc.xml中, 而数据库事务管理器配置在application.xml中, 会导致数据库事务失效, 原理一样.")]),a._v(" "),e("p",[a._v("所以这里 ,我们需要把AOP放置在Controller扫描配置的文件中.")])]),a._v(" "),e("p",[a._v("SpringMVC的配置：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('    \n    \x3c!-- 配置包扫描 @Controller注解类--\x3e\n    <context:component-scan base-package="com.hand.controller"/>\n   \x3c!-- 扫描切面 --\x3e\n    <context:component-scan base-package="com.hand.aspectj" />\n    \x3c!--开启AOP--\x3e\n    <aop:aspectj-autoproxy></aop:aspectj-autoproxy>\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);