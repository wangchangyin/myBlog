(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{464:function(n,s,a){"use strict";a.r(s);var e=a(8),t=Object(e.a)({},(function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h1",{attrs:{id:"spring笔记"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#spring笔记"}},[n._v("#")]),n._v(" Spring笔记")]),n._v(" "),a("h2",{attrs:{id:"_1-ioc底层原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-ioc底层原理"}},[n._v("#")]),n._v(" 1.IOC底层原理")]),n._v(" "),a("blockquote",[a("p",[n._v("IOC底层原理设计：XML解析、工厂模式、反射")])]),n._v(" "),a("h3",{attrs:{id:"_1-1-以前对象中使用另一个对象的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-以前对象中使用另一个对象的方式"}},[n._v("#")]),n._v(" 1.1.以前对象中使用另一个对象的方式")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/image-20210719111232144.png",alt:"image-20210719111232144"}})]),n._v(" "),a("h3",{attrs:{id:"_1-2-升级版-工厂模式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-升级版-工厂模式"}},[n._v("#")]),n._v(" 1.2.升级版（工厂模式）")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/image-20210719111401913.png",alt:"image-20210719111401913"}})]),n._v(" "),a("h3",{attrs:{id:"_1-3-ioc中调用对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-ioc中调用对象"}},[n._v("#")]),n._v(" 1.3.IOC中调用对象")]),n._v(" "),a("ol",[a("li",[n._v("XML文件，注册Bean")]),n._v(" "),a("li",[n._v("创建工程，解析XML文件，获取类路径")]),n._v(" "),a("li",[n._v("通过反射获取对象")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/image-20210719111740435.png",alt:"image-20210719111740435"}})]),n._v(" "),a("h2",{attrs:{id:"_2-ioc中的接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-ioc中的接口"}},[n._v("#")]),n._v(" 2.IOC中的接口")]),n._v(" "),a("p",[n._v("IOC思想基于IOC容器完成，ICO容器底层就是对象工厂；")]),n._v(" "),a("p",[n._v("IOC中提供两大接口：")]),n._v(" "),a("ol",[a("li",[a("p",[n._v("BeanFactory：IOC容器底层使用的就是该接口，不提供开发人员进行使用；在加载配置文件的时候不会创建对象，在获取对象（getBean()）才会去创建对象；")])]),n._v(" "),a("li",[a("p",[n._v("ApplicationContext：BeanFactory的子接口，提供更强大的功能，一般由开发人员进行使用；加载配置文件时就会创建对象。（推荐使用，Tomcat启动就会去创建对象）")]),n._v(" "),a("p",[n._v("ApplicationContext接口的实现：")]),n._v(" "),a("ul",[a("li",[n._v("FileSystemXmlApplicationContext：在磁盘了寻找（完整路径）")]),n._v(" "),a("li",[n._v("ClassPathXmlApplicationContext：在项目的类路径寻找XML文件")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/image-20210719113009180.png",alt:"image-20210719113009180"}})])])]),n._v(" "),a("h2",{attrs:{id:"_3-bean管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-bean管理"}},[n._v("#")]),n._v(" 3.Bean管理")]),n._v(" "),a("h3",{attrs:{id:"_3-1-基于xml管理bean-手动装配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-基于xml管理bean-手动装配"}},[n._v("#")]),n._v(" 3.1.基于XML管理bean（手动装配）")]),n._v(" "),a("h4",{attrs:{id:"_3-1-1-基于xml文件创建对象"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-1-基于xml文件创建对象"}},[n._v("#")]),n._v(" 3.1.1.基于XML文件创建对象")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">\n    <bean id="PersonService" class="com.hand.service.impl.PersonServiceImpl"></bean>\n</beans>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/image-20210719144119398.png",alt:"image-20210719144119398"}})]),n._v(" "),a("h4",{attrs:{id:"_3-1-2-基于xml文件注入属性-di"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-2-基于xml文件注入属性-di"}},[n._v("#")]),n._v(" 3.1.2.基于XML文件注入属性（DI）")]),n._v(" "),a("ul",[a("li",[a("p",[n._v("构造器注入：")]),n._v(" "),a("p",[n._v("提供对象、List、Set、Map、propertys等类型")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">\n    <bean id="User2" class="com.hand.dto.User">\n        <constructor-arg name="name" value="李四"></constructor-arg>\n        <constructor-arg name="age" value="22"></constructor-arg>\n        <constructor-arg name="testList" >\n            <list>\n                <value>list1</value>\n                <value>list2</value>\n                <value>list3</value>\n            </list>\n        </constructor-arg>\n        <constructor-arg name="testSet">\n            <set>\n                <value>set1</value>\n                <value>set2</value>\n                <value>set3</value>\n            </set>\n        </constructor-arg>\n        <constructor-arg name="testArrays">\n            <array>\n                <value>array1</value>\n                <value>array2</value>\n                <value>array3</value>\n            </array>\n        </constructor-arg>\n        <constructor-arg name="testMap">\n            <map>\n                <entry key="key1" value="val1"></entry>\n                <entry key="key2" value="val2"></entry>\n                <entry key="key3" value="val3"></entry>\n            </map>\n        </constructor-arg>\n        <constructor-arg name="testProperties">\n            <props>\n                <prop key="key1">val1</prop>\n                <prop key="key2">val2</prop>\n                <prop key="key3">val3</prop>\n            </props>\n        </constructor-arg>\n    </bean>\n</beans>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("Set注入")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">\n    <bean id="User" class="com.hand.dto.User">\n        <property name="name" value="李四"></property>\n        <property name="age" value="21"></property>\n        <property name="testList">\n            <list>\n                <value>list1</value>\n                <value>list2</value>\n                <value>list3</value>\n            </list>\n        </property>\n        <property name="testArrays">\n            <array>\n                <value>array1</value>\n                <value>array2</value>\n                <value>array3</value>\n            </array>\n        </property>\n        <property name="testSet">\n            <set>\n                <value>set1</value>\n                <value>set2</value>\n                <value>set3</value>\n            </set>\n        </property>\n        <property name="testMap">\n            <map>\n                <entry key="key1" value="val1"></entry>\n                <entry key="key2" value="val2"></entry>\n                <entry key="key3" value="val3"></entry>\n            </map>\n        </property>\n        <property name="testProperties">\n            <props>\n                <prop key="key1">val1</prop>\n                <prop key="key2">val2</prop>\n                <prop key="key3">val3</prop>\n            </props>\n        </property>\n    </bean>\n</beans>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("P命名空间注入（其实就是简化set注入）")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/image-20210719145421142.png",alt:"image-20210719145421142"}})])])]),n._v(" "),a("h4",{attrs:{id:"_3-1-3-注入特殊符号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-3-注入特殊符号"}},[n._v("#")]),n._v(" 3.1.3.注入特殊符号")]),n._v(" "),a("ol",[a("li",[a("p",[n._v("注入空值")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('    <bean id="User2" class="com.hand.dto.User">\n        <property name="name">\n            <null></null>\n        </property>\n    </bean>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("注入特殊符号")]),n._v(" "),a("p",[n._v("方法一：通过转义<>")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('    <bean id="User2" class="com.hand.dto.User">\n        <property name="name" value="&lt;南京&gt;">\n        </property>\n    </bean>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br")])]),a("p",[n._v("方法二:CDATA的方式")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('    <bean id="User2" class="com.hand.dto.User">\n        <property name="name" value="&lt;南京&gt;">\n        </property>\n        <property name="age" value="<![CDATA[<南京>]]>">\n        </property>\n    </bean>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br")])])])]),n._v(" "),a("h4",{attrs:{id:"_3-1-4-导入外部bean"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-4-导入外部bean"}},[n._v("#")]),n._v(" 3.1.4.导入外部bean")]),n._v(" "),a("p",[n._v("通过ref导入")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/image-20210719150554784.png",alt:"image-20210719150554784"}})]),n._v(" "),a("h4",{attrs:{id:"_3-1-5-注入内部bean"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-5-注入内部bean"}},[n._v("#")]),n._v(" 3.1.5.注入内部bean")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:p="http://www.springframework.org/schema/p"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">\n\t\x3c!--注入内部bean--\x3e\n    <bean id="User" class="com.hand.dto.User">\n        <property name="objectTest">\n            <bean>\n                <property name="name" value="测试"></property>\n            </bean>\n        </property>\n    </bean>\n</beans>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br")])]),a("h3",{attrs:{id:"_3-2-工厂bean"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-工厂bean"}},[n._v("#")]),n._v(" 3.2.工厂Bean")]),n._v(" "),a("blockquote",[a("p",[n._v("返回类型与定义的类型可以不一致")])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("package com.hand.factory;\n\nimport com.hand.dto.User;\nimport org.springframework.beans.factory.FactoryBean;\n\npublic class MyBean implements FactoryBean<User> {\n    //定义返回的类型\n    @Override\n    public User getObject() throws Exception {\n        User user=new User();\n        return user;\n    }\n\n    @Override\n    public Class<?> getObjectType() {\n        return null;\n    }\n\n    @Override\n    public boolean isSingleton() {\n        return false;\n    }\n}\n\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br")])]),a("p",[n._v("配置：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:p="http://www.springframework.org/schema/p"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">\n\n    <bean id="mybean" class="com.hand.factory.MyBean"></bean>\n</beans>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br")])]),a("p",[n._v("测试")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand;\n\nimport com.hand.factory.MyBean;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class Test1 {\n    @Test\n    public void test1(){\n        ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");\n        MyBean myBean = (MyBean)applicationContext.getBean(MyBean.class);\n        System.out.println(myBean);\n    }\n}\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br")])]),a("h3",{attrs:{id:"_3-3-bean的作用域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-bean的作用域"}},[n._v("#")]),n._v(" 3.3.bean的作用域")]),n._v(" "),a("ol",[a("li",[n._v("singleton：单例（默认），启动项目后，就会创建bean")]),n._v(" "),a("li",[n._v("prototype：原型，每次使用都会创建新的对象")]),n._v(" "),a("li",[n._v("request：一次请求中")]),n._v(" "),a("li",[n._v("session：一次回话中")])]),n._v(" "),a("h3",{attrs:{id:"_3-4-bean的生命周期"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-bean的生命周期"}},[n._v("#")]),n._v(" 3.4.bean的生命周期")]),n._v(" "),a("ol",[a("li",[a("strong",[n._v("通过构造方法创建bean的实例")])]),n._v(" "),a("li",[n._v("为bean设置属性值和对其他的bean的引用（调用set方法）")]),n._v(" "),a("li",[n._v("前置通知，在初始化之前执行（需要自己创建）")]),n._v(" "),a("li",[n._v("bean的初始化的方法（需要自己创建初始化的方法）")]),n._v(" "),a("li",[n._v("后置通知，在初始化之后执行（需要自己创建）")]),n._v(" "),a("li",[a("strong",[n._v("bean就可以使用了（获取到对象）")])]),n._v(" "),a("li",[n._v("销毁bean（也需要自己创建）")])]),n._v(" "),a("p",[n._v("实现：")]),n._v(" "),a("blockquote",[a("ol",[a("li",[a("strong",[n._v("通过构造方法创建bean的实例")])]),n._v(" "),a("li",[n._v("为bean设置属性值和对其他的bean的引用（调用set方法）")]),n._v(" "),a("li",[n._v("前置通知，在初始化之前执行（需要自己创建）")]),n._v(" "),a("li",[n._v("bean的初始化的方法（需要自己创建初始化的方法）")]),n._v(" "),a("li",[n._v("后置通知，在初始化之后执行（需要自己创建）")]),n._v(" "),a("li",[a("strong",[n._v("bean就可以使用了（获取到对象）")])]),n._v(" "),a("li",[n._v("销毁bean（也需要自己创建）")])])]),n._v(" "),a("ol",[a("li",[a("p",[n._v("创建bean")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand.bean;\n\n/**\n * bean的生命周期\n */\npublic class BeanCycle {\n    private String name;\n\n    public String getName() {\n        return name;\n    }\n    public void setName(String name) {\n        System.out.println("第二步：bean设置值");\n        this.name = name;\n    }\n\n    public BeanCycle() {\n        System.out.println("第一步：构造方法执行");\n    }\n\n    public void initMethod(){\n        System.out.println("第四步：初始化方法");\n    }\n\n    public void destroyMethod(){\n        System.out.println("第七部：bean销毁方法");\n    }\n}\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("创建后置bean")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand.bean;\n\nimport org.springframework.beans.BeansException;\nimport org.springframework.beans.factory.config.BeanPostProcessor;\n\n/**\n * bean的后置处理\n */\npublic class BeanProcess implements BeanPostProcessor {\n    @Override\n    public Object postProcessBeforeInitialization(Object bean, String beanName) throws BeansException {\n        System.out.println("第三部：后置方法之前");\n        return bean;\n    }\n\n    @Override\n    public Object postProcessAfterInitialization(Object bean, String beanName) throws BeansException {\n        System.out.println("第五部：后置方法之后");\n        return bean;\n    }\n}\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("注册bean，")]),n._v(" "),a("blockquote",[a("p",[n._v("注意注意：后置方法 会作用于该文件的所有bean，也就是说所有的bean都会执行该方法")])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:p="http://www.springframework.org/schema/p"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd">\n    \x3c!--bean生命周期--\x3e\n    <bean id="beanCycle" class="com.hand.bean.BeanCycle" init-method="initMethod" destroy-method="destroyMethod">\n        <property name="name" value="测试"></property>\n    </bean>\n    \x3c!--后置方法 该配置文件的所有bean都会执行该后置方法--\x3e\n    <bean id="beanProcess" class="com.hand.bean.BeanProcess">\n    </bean>\n</beans>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("测试：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand;\n\nimport com.hand.bean.BeanCycle;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class Test1 {\n    @Test\n    public void test1(){\n        ClassPathXmlApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");\n        BeanCycle myBean = (BeanCycle)applicationContext.getBean(BeanCycle.class);\n        System.out.println("第六步：可以使用bean了");\n        applicationContext.close();\n        System.out.println("第七步：销毁bean了");\n    }\n}\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("输出：")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/image-20210719192841312.png",alt:"image-20210719192841312"}})])])]),n._v(" "),a("h3",{attrs:{id:"_3-5-自动装配"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-自动装配"}},[n._v("#")]),n._v(" 3.5.自动装配")]),n._v(" "),a("blockquote",[a("p",[n._v("手动装配：注册一个bean时，通过property进行赋值")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('    <bean id="beanCycle" class="com.hand.bean.BeanCycle">\n        <property name="name" ref="beanProcess"></property>\n    </bean>\n    <bean id="beanProcess" class="com.hand.bean.BeanProcess">\n    </bean>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br")])]),a("p",[n._v("自动装配：")]),n._v(" "),a("ol",[a("li",[n._v('autowire="byName"：bean的属性名和注册的bean的ID要一致')]),n._v(" "),a("li",[n._v('autowire="byType"：根据bean的类型匹配')])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('    <bean id="beanCycle" class="com.hand.bean.BeanCycle" autowire="byName">\n        <property name="name" ref="beanProcess"></property>\n    </bean>\n    <bean id="beanProcess" class="com.hand.bean.BeanProcess">\n    </bean>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br")])])]),n._v(" "),a("h3",{attrs:{id:"_3-6-引入外部配置文件-properties文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-引入外部配置文件-properties文件"}},[n._v("#")]),n._v(" 3.6.引入外部配置文件（properties文件）")]),n._v(" "),a("blockquote",[a("p",[n._v("常见的就是引入数据库连接池")])]),n._v(" "),a("h5",{attrs:{id:"_3-6-1-以前配置连接池信息"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-1-以前配置连接池信息"}},[n._v("#")]),n._v(" 3.6.1.以前配置连接池信息：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans.xsd\n                        http://www.springframework.org/schema/context\n                       http://www.springframework.org/schema/context/spring-context.xsd">\n\n    <bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource">\n        <property name="driverClassName" value="com.mysql.jdbc.Driver"></property>\n        <property name="url" value="jdbc:mysql://localhost:3306/userDB"></property>\n        <property name="username" value="root"></property>\n        <property name="password" value="root"></property>\n    </bean>\n</beans>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br")])]),a("h5",{attrs:{id:"_3-6-2-新版写法引入外部文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-6-2-新版写法引入外部文件"}},[n._v("#")]),n._v(" 3.6.2.新版写法引入外部文件")]),n._v(" "),a("p",[n._v("配置文件：jdbc.properties")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("jdbc.driverClassName=com.mysql.jdbc.Driver\njdbc.url=jdbc:mysql://localhost:3306/userDB\njdbc.username=root\njdbc.password=root\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br")])]),a("p",[n._v("applicationContext.xml的配置")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans.xsd\n                        http://www.springframework.org/schema/context\n                        http://www.springframework.org/schema/context/spring-context.xsd">\n    \x3c!--新版写法--\x3e\n    \x3c!--引入外部配置文件--\x3e\n    <context:property-placeholder location="jdbc.properties"/>\n    <bean id="dataSource" class="com.alibaba.druid.pool.DruidDataSource">\n        <property name="driverClassName" value="${jdbc.driverClassName}"></property>\n        <property name="url" value="${jdbc.url}"></property>\n        <property name="username" value="${jdbc.username}"></property>\n        <property name="password" value="${jdbc.password}"></property>\n    </bean>\n</beans>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br")])]),a("h3",{attrs:{id:"_3-7-基于注解管理bean"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-基于注解管理bean"}},[n._v("#")]),n._v(" 3.7.基于注解管理bean")]),n._v(" "),a("h4",{attrs:{id:"_3-7-1-创建bean"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-1-创建bean"}},[n._v("#")]),n._v(" 3.7.1.创建bean")]),n._v(" "),a("ol",[a("li",[a("p",[n._v("导入依赖")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-aop</artifactId>\n      <version>5.2.6.RELEASE</version>\n    </dependency>\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("开启组件扫描")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:aop="http://www.springframework.org/schema/aop"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans.xsd\n                        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\n                        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">\n    \x3c!--开启包扫描，多个包用逗号隔开--\x3e\n\t<context:component-scan base-package="com.hand"></context:component-scan>--\x3e\n</beans>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br")])]),a("p",[n._v("扩展：")]),n._v(" "),a("p",[n._v("示例一：扫描com.hand包，但是不使用默认的过滤器")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<context: component-scan base-package="com.hand" use-default-filters="false">\n   \x3c!--只扫描注解是Controller的类--\x3e\n   <context:include-filter type="annotation"\n    expression="org.springframework.stereotype.Controller"/>\n</context:component-scan>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br")])]),a("p",[n._v("示例二：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('\x3c!--下面配置扫描包所有内容,context:exclude-filter:设置哪些内容不进行扫描--\x3e\n<context:component-scan base package="com.hand">\n    <context:exclude-filter type="annotation"\n    expression="org.springframework.stereotype.Controller"/>\n</context:component-scan>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("通过@Componet、@service、@Controller、@Repository注入到Spirng中")])])]),n._v(" "),a("h4",{attrs:{id:"_3-7-2-属性注入"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-7-2-属性注入"}},[n._v("#")]),n._v(" 3.7.2.属性注入")]),n._v(" "),a("ol",[a("li",[a("p",[n._v("@Autowired：根据属性类型注入")]),n._v(" "),a("p",[n._v("直接引入对象，内部封装了set方法")])]),n._v(" "),a("li",[a("p",[n._v("@Qualifier：根据名称注入")]),n._v(" "),a("p",[n._v("必须配合@Autowired使用")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('@Repository(value="userdaodaodao")\npublic UserDao{\n\tpublic void add(){\n\t\t...\n\t}\n}\n\n引用：\npublic UserService{\n\t@Autowired\n\t@Qualifier("userdaodaodao")\n\tprivate UserDao userDao;\n\tpublic void add(){\n\t\tuserDao.add();\n\t\t...\n\t}\n}\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("@Resourse：可以根据类型注入，也可以根据名称注入")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('@Repository(value="userdaodaodao")\npublic UserDao{\n\tpublic void add(){\n\t\t...\n\t}\n}\n\n引用：\npublic UserService{\n\t@Resourse("userdaodaodao")\n\tprivate UserDao userDao;\n\tpublic void add(){\n\t\tuserDao.add();\n\t\t...\n\t}\n}\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("@Value")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('public UserService{\n\t@Value("abc")\n\tprivate String name;\n\t@Resourse("userdaodaodao")\n\tprivate UserDao userDao;\n\tpublic void add(){\n\t\tuserDao.add();\n\t\t...\n\t}\n}\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br")])])])]),n._v(" "),a("h3",{attrs:{id:"_3-4-全注解开发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-全注解开发"}},[n._v("#")]),n._v(" 3.4.全注解开发")]),n._v(" "),a("p",[n._v("配置文件改为配置类：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand.config;\n\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.EnableAspectJAutoProxy;\n\n@Configuration\n@ComponentScan("com.hand")  //扫包\n@EnableAspectJAutoProxy(proxyTargetClass=true) //开启AOP\npublic class AopConfig {\n}\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br")])]),a("p",[n._v("测试：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("    @Test\n    public void test2(){\n        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(AopConfig.class);\n        BeanCycle myBean = (BeanCycle)applicationContext.getBean(BeanCycle.class);\n    }\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br")])]),a("h2",{attrs:{id:"_4-aop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-aop"}},[n._v("#")]),n._v(" 4.AOP")]),n._v(" "),a("p",[n._v("AOP：面向切面编程，是OOP的补充；比如我们可以把权限控制、事务控制、日志管理把这些重复的业务代码抽离出来，通过配置的方式（或注解）引入到需要的地方。")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/image-20210719153955006.png",alt:"image-20210719153955006"}})]),n._v(" "),a("h3",{attrs:{id:"_1-jdk动态代理-需要接口"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-jdk动态代理-需要接口"}},[n._v("#")]),n._v(" 1.JDK动态代理（需要接口）")]),n._v(" "),a("p",[n._v("通过接口创建代理实现类，增强类的方法")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/image-20210719154614500.png",alt:"image-20210719154614500"}})]),n._v(" "),a("h4",{attrs:{id:"代码实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#代码实现"}},[n._v("#")]),n._v(" 代码实现：")]),n._v(" "),a("ol",[a("li",[a("p",[n._v("service、serviceimpl方法，需要植入到该类的方法中")])]),n._v(" "),a("li",[a("p",[n._v("定义切面")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand.aspect;\n\npublic class MyAspect {\n    public void before(){\n        System.out.println("方法执行前。。。。");\n    }\n    public void after(){\n        System.out.println("方法执行后。。。。");\n    }\n}\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("代理类")])]),n._v(" "),a("li",[a("p",[n._v("Proxy.newProxyInstance(类加载器，接口，InvocationHandler对象)方法获取代理对象")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand.aspect;\n\nimport com.hand.service.IPersonService;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\nimport java.lang.reflect.InvocationHandler;\nimport java.lang.reflect.Method;\nimport java.lang.reflect.Proxy;\n\npublic class JdkProxy implements InvocationHandler {\n    private Object target ;//需要代理的目标对象\n    @Override\n    public Object invoke(Object proxy, Method method, Object[] args) throws Throwable {\n        MyAspect myAspect=new MyAspect();\n        myAspect.before();//方法执行前\n        Object result = method.invoke(target, args);\n        myAspect.after();//方法执行后\n        return result;\n    }\n    //定义获取代理对象方法\n    private Object getJDKProxy(Object targetObject){\n        //为目标对象target赋值\n        this.target = targetObject;\n        //JDK动态代理只能针对实现了接口的类进行代理，newProxyInstance 函数所需参数就可看出\n        return Proxy.newProxyInstance(targetObject.getClass().getClassLoader(),\n                targetObject.getClass().getInterfaces(),\n                this);\n    }\n\n    public static void main(String[] args) {\n        JdkProxy jdkProxy = new JdkProxy();//实例化JDKProxy对象\n        ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");\n        IPersonService personService = (UserManagerImpl)jdkProxy.getJDKProxy((UserManagerImpl) applicationContext.getBean("UserManagerImpl"));\n        personService.add();\n    }\n}\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br")])])])]),n._v(" "),a("h3",{attrs:{id:"_2-cglib动态代理-会创建子类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-cglib动态代理-会创建子类"}},[n._v("#")]),n._v(" 2.CGlib动态代理（会创建子类）")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/image-20210719154903807.png",alt:"image-20210719154903807"}})]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand.aspect;\n\nimport com.hand.service.IPersonService;\nimport org.springframework.cglib.proxy.Enhancer;\nimport org.springframework.cglib.proxy.MethodInterceptor;\nimport org.springframework.cglib.proxy.MethodProxy;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\nimport java.lang.reflect.Method;\n\npublic class CglibProxy implements MethodInterceptor {\n    private Object target ;//需要代理的目标对象\n    @Override\n    public Object intercept(Object o, Method method, Object[] objects, MethodProxy methodProxy) throws Throwable {\n        MyAspect myAspect=new MyAspect();\n        myAspect.before();//方法执行前\n        Object invoke = method.invoke(target, objects);\n        myAspect.after();//方法执行后\n        return invoke;\n    }\n    //定义获取代理对象方法\n    public Object getCglibProxy(Object objectTarget){\n        //为目标对象target赋值\n        this.target = objectTarget;\n        Enhancer enhancer = new Enhancer();\n        //设置父类,因为Cglib是针对指定的类生成一个子类，所以需要指定父类\n        enhancer.setSuperclass(objectTarget.getClass());\n        enhancer.setCallback(this);// 设置回调\n        Object result = enhancer.create();//创建并返回代理对象\n        return result;\n    }\n    public static void main(String[] args) {\n        CglibProxy cglibProxy = new CglibProxy();//实例化JDKProxy对象\n        ApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");\n        IPersonService personService = (IPersonService)cglibProxy.getCglibProxy((IPersonService) applicationContext.getBean("PersonService"));\n        personService.add();\n    }\n}\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br")])]),a("h3",{attrs:{id:"_3-jdk动态代理和cglib字节码生成的区别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-jdk动态代理和cglib字节码生成的区别"}},[n._v("#")]),n._v(" 3.JDK动态代理和CGLIB字节码生成的区别？")]),n._v(" "),a("blockquote",[a("p",[n._v("（1）JDK动态代理只能对实现了接口的类生成代理，而不能针对类\n（2）CGLIB是针对类实现代理，主要是对指定的类生成一个子类，覆盖其中的方法\n因为是继承，所以该类或方法最好不要声明成final")])]),n._v(" "),a("h3",{attrs:{id:"_4-aop的术语"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_4-aop的术语"}},[n._v("#")]),n._v(" 4.AOP的术语")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/image-20210719161149858.png",alt:"image-20210719161149858"}})]),n._v(" "),a("h3",{attrs:{id:"_5-spring中使用aop"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-spring中使用aop"}},[n._v("#")]),n._v(" 5.Spring中使用AOP")]),n._v(" "),a("h4",{attrs:{id:"准备工作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#准备工作"}},[n._v("#")]),n._v(" 准备工作：")]),n._v(" "),a("p",[n._v("AspectJ不是Spring的组成部分，独立的AOP框架，一般把AspectJ与Spring一起使用，进行AOP的操作")]),n._v(" "),a("h4",{attrs:{id:"实现方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#实现方式"}},[n._v("#")]),n._v(" 实现方式")]),n._v(" "),a("ol",[a("li",[n._v("基于XML文件实现")]),n._v(" "),a("li",[n._v("基于注解的方式（常用）")])]),n._v(" "),a("h4",{attrs:{id:"切入点表达式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#切入点表达式"}},[n._v("#")]),n._v(" 切入点表达式")]),n._v(" "),a("blockquote",[a("p",[n._v("execution(【权限控制】【返回类型】【包名】【方法名】（【参数】）)")])]),n._v(" "),a("p",[n._v("案列一:com.wcy.add的Person的add方法增强")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("execution(*com.wcy.Person.add(..))\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[n._v("案列二:com.wcy.add的Person的所有方法增强")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("execution(*com.wcy.Person.*(..))\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("p",[n._v("案列三:com.wcy.add的所有类的所有方法增强")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("xxxxxxxxxx execution(*com.wcy.*.*(..))\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("h4",{attrs:{id:"引入依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#引入依赖"}},[n._v("#")]),n._v(" 引入依赖")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-context</artifactId>\n      <version>5.2.6.RELEASE</version>\n    </dependency>\n    \x3c!--AOP--\x3e\n    <dependency>\n      <groupId>org.aspectj</groupId>\n      <artifactId>aspectjweaver</artifactId>\n      <version>1.9.4</version>\n    </dependency>\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br")])]),a("h4",{attrs:{id:"注解实现-重点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注解实现-重点"}},[n._v("#")]),n._v(" 注解实现（重点）")]),n._v(" "),a("ol",[a("li",[a("p",[n._v("定义一个需要增强的类，比如UserService、UserServiceImpl")])]),n._v(" "),a("li",[a("p",[n._v("开启包扫描、开启AOP")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:aop="http://www.springframework.org/schema/aop"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans.xsd\n                        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\n                        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">\n    \x3c!--开启包扫描--\x3e\n    <context:component-scan base-package="com.hand"></context:component-scan>\n    \x3c!--开启AOP--\x3e\n    <aop:aspectj-autoproxy></aop:aspectj-autoproxy>\n</beans>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br")])]),a("p",[n._v("可以换成配置类实现：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand.config;\n\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.EnableAspectJAutoProxy;\n\n@Configuration\n@ComponentScan("com.hand")  //扫包\n@EnableAspectJAutoProxy(proxyTargetClass=true) //开启AOP\npublic class AopConfig {\n}\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("定义切面，定义通知类型")]),n._v(" "),a("ul",[a("li",[n._v('@Before("pointcut()")//前置通知')]),n._v(" "),a("li",[n._v('@After("pointcut()")//后置通知 最终通知')]),n._v(" "),a("li",[n._v('@AfterReturning("pointcut()")//返回结果才执行  异常不执行')]),n._v(" "),a("li",[n._v('@AfterThrowing(value = "pointcut()", throwing = "ex") //异常通知')]),n._v(" "),a("li",[n._v('@Around("pointcut()") //环绕通知 异常执行前半部分')])]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand.aspect;\n\nimport org.aspectj.lang.JoinPoint;\nimport org.aspectj.lang.ProceedingJoinPoint;\nimport org.aspectj.lang.annotation.*;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.stereotype.Component;\n\nimport java.io.PrintWriter;\nimport java.io.StringWriter;\nimport java.util.Arrays;\nimport java.util.List;\n\n@Component\n@Aspect\n@Order(1) //多个切面定义优先级，越小优先级越高\npublic class AnnotationProxy {\n    @Pointcut("execution(* com.hand.*.*.*(..))")\n    public void pointcut() {\n\n    }\n\n    @Before("pointcut()")//前置通知\n    public static void before(JoinPoint joinPoint) {\n        //方法名\n        String method = joinPoint.getSignature().getName();\n        //参数\n        List<Object> args = Arrays.asList(joinPoint.getArgs());\n\n        System.out.println("方法执行前");\n    }\n\n    @After("pointcut()")//后置通知 最终通知\n    public static void after() {\n        System.out.println("方法执行后");\n    }\n    @AfterReturning("pointcut()")//返回结果才执行  异常不执行\n    public static void afterReturning() {\n        System.out.println("方法返回后");\n    }\n\n    //异常执行\n    @AfterThrowing(value = "pointcut()", throwing = "ex")\n    public static void afterException(Exception ex) {\n        StringWriter sw = new StringWriter();\n        ex.printStackTrace(new PrintWriter(sw, true));\n        System.out.println("异常通知:" + sw.getBuffer().toString());\n    }\n\n\n    //环绕通知\n    @Around("pointcut()")\n    public static void around(ProceedingJoinPoint proceedingJoinPoint) throws Throwable {\n        System.out.println("环绕之前");\n        proceedingJoinPoint.proceed();\n        System.out.println("环绕之后");\n    }\n}\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br"),a("span",{staticClass:"line-number"},[n._v("46")]),a("br"),a("span",{staticClass:"line-number"},[n._v("47")]),a("br"),a("span",{staticClass:"line-number"},[n._v("48")]),a("br"),a("span",{staticClass:"line-number"},[n._v("49")]),a("br"),a("span",{staticClass:"line-number"},[n._v("50")]),a("br"),a("span",{staticClass:"line-number"},[n._v("51")]),a("br"),a("span",{staticClass:"line-number"},[n._v("52")]),a("br"),a("span",{staticClass:"line-number"},[n._v("53")]),a("br"),a("span",{staticClass:"line-number"},[n._v("54")]),a("br"),a("span",{staticClass:"line-number"},[n._v("55")]),a("br"),a("span",{staticClass:"line-number"},[n._v("56")]),a("br"),a("span",{staticClass:"line-number"},[n._v("57")]),a("br"),a("span",{staticClass:"line-number"},[n._v("58")]),a("br"),a("span",{staticClass:"line-number"},[n._v("59")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("测试")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand;\n\nimport com.hand.service.IPersonService;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class Test1 {\n    @Test\n    public void test1(){\n        ApplicationContext applicationContext = new ClassPathXmlApplicationContext("aop.xml");//获取上方的配置的xml文件\n        IPersonService personService = (IPersonService)applicationContext.getBean(IPersonService.class);\n        personService.add();\n    }\n}\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/image-20210719165556918.png",alt:"image-20210719165556918"}})])])]),n._v(" "),a("h4",{attrs:{id:"xml文件实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#xml文件实现"}},[n._v("#")]),n._v(" XML文件实现")]),n._v(" "),a("ol",[a("li",[a("p",[n._v("需要增强的类")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand.aop.xml;\n\npublic class UserService {\n    public void add(){\n        System.out.println("添加方法");\n    }\n}\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("增强的方法")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand.aop.xml;\n\npublic class XmlAspect {\n    public void before(){\n        System.out.println("前置通知");\n    }\n}\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("配置")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:aop="http://www.springframework.org/schema/aop"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans.xsd\n                        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop.xsd\n                        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd">\n\n    <bean id="userService" class="com.hand.aop.xml.UserService"></bean>\n    <bean id="xmlAspect" class="com.hand.aop.xml.XmlAspect"></bean>\n\n    <aop:config>\n        \x3c!--切入点--\x3e\n        <aop:pointcut id="MyAop" expression="execution(* com.hand.aop.xml.UserService.add(..))"/>\n        \x3c!--定义切面 ref增强的类--\x3e\n        <aop:aspect ref="xmlAspect">\n            \x3c!--哪个切入点--\x3e\n            <aop:before method="before" pointcut-ref="MyAop"></aop:before>\n        </aop:aspect>\n    </aop:config>\n</beans>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br")])])]),n._v(" "),a("li",[a("p",[n._v("测试")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand;\n\nimport com.hand.aop.xml.UserService;\nimport org.junit.jupiter.api.Test;\nimport org.springframework.context.ApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class Test1 {\n    @Test\n    public void test1(){\n        ApplicationContext applicationContext = new ClassPathXmlApplicationContext("aop.xml");\n        UserService personService = (UserService)applicationContext.getBean(UserService.class);\n        personService.add();\n    }\n}\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br")])])])]),n._v(" "),a("h2",{attrs:{id:"_5-spring操作jdbc-不推荐"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-spring操作jdbc-不推荐"}},[n._v("#")]),n._v(" 5.Spring操作JDBC(不推荐)")]),n._v(" "),a("h3",{attrs:{id:"_5-1-添加依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-1-添加依赖"}},[n._v("#")]),n._v(" 5.1.添加依赖")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.hande</groupId>\n  <artifactId>SSM_demo</artifactId>\n  <version>1.0-SNAPSHOT</version>\n  <packaging>war</packaging>\n\n  <name>SSM_demo Maven Webapp</name>\n  \x3c!-- FIXME change it to the project\'s website --\x3e\n  <url>http://www.example.com</url>\n\n  <properties>\n    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n    <maven.compiler.source>1.7</maven.compiler.source>\n    <maven.compiler.target>1.7</maven.compiler.target>\n  </properties>\n\n  <dependencies>\n\n    \x3c!--spring核心依赖--\x3e\n    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-context</artifactId>\n      <version>5.2.6.RELEASE</version>\n    </dependency>\n    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-core</artifactId>\n      <version>5.2.6.RELEASE</version>\n    </dependency>\n    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-aop</artifactId>\n      <version>5.2.6.RELEASE</version>\n    </dependency>\n    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-orm</artifactId>\n      <version>5.2.6.RELEASE</version>\n    </dependency>\n    \x3c!--AOP--\x3e\n    <dependency>\n      <groupId>org.aspectj</groupId>\n      <artifactId>aspectjweaver</artifactId>\n      <version>1.9.4</version>\n    </dependency>\n\n\n\n\n    \x3c!--阿里巴巴连接池--\x3e\n    <dependency>\n      <groupId>com.alibaba</groupId>\n      <artifactId>druid</artifactId>\n      <version>1.1.10</version>\n    </dependency>\n    <dependency>\n      <groupId>mysql</groupId>\n      <artifactId>mysql-connector-java</artifactId>\n      <version>5.1.25</version>\n    </dependency>\n\n\n\n    \x3c!--junit测试依赖--\x3e\n    <dependency>\n      <groupId>org.hamcrest</groupId>\n      <artifactId>hamcrest-core</artifactId>\n      <version>2.2</version>\n      <scope>test</scope>\n    </dependency>\n    <dependency>\n      <groupId>org.junit.jupiter</groupId>\n      <artifactId>junit-jupiter-api</artifactId>\n      <version>RELEASE</version>\n    </dependency>\n\n\x3c!--    <dependency>--\x3e\n\x3c!--      <groupId>junit</groupId>--\x3e\n\x3c!--      <artifactId>junit</artifactId>--\x3e\n\x3c!--      <version>4.11</version>--\x3e\n\x3c!--      <scope>test</scope>--\x3e\n\x3c!--    </dependency>--\x3e\n  </dependencies>\n\n  <build>\n    <finalName>SSM_demo</finalName>\n    <pluginManagement>\x3c!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --\x3e\n      <plugins>\n        <plugin>\n          <artifactId>maven-clean-plugin</artifactId>\n          <version>3.1.0</version>\n        </plugin>\n        \x3c!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --\x3e\n        <plugin>\n          <artifactId>maven-resources-plugin</artifactId>\n          <version>3.0.2</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-compiler-plugin</artifactId>\n          <version>3.8.0</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-surefire-plugin</artifactId>\n          <version>2.22.1</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-war-plugin</artifactId>\n          <version>3.2.2</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-install-plugin</artifactId>\n          <version>2.5.2</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-deploy-plugin</artifactId>\n          <version>2.8.2</version>\n        </plugin>\n      </plugins>\n    </pluginManagement>\n  </build>\n</project>\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br"),a("span",{staticClass:"line-number"},[n._v("46")]),a("br"),a("span",{staticClass:"line-number"},[n._v("47")]),a("br"),a("span",{staticClass:"line-number"},[n._v("48")]),a("br"),a("span",{staticClass:"line-number"},[n._v("49")]),a("br"),a("span",{staticClass:"line-number"},[n._v("50")]),a("br"),a("span",{staticClass:"line-number"},[n._v("51")]),a("br"),a("span",{staticClass:"line-number"},[n._v("52")]),a("br"),a("span",{staticClass:"line-number"},[n._v("53")]),a("br"),a("span",{staticClass:"line-number"},[n._v("54")]),a("br"),a("span",{staticClass:"line-number"},[n._v("55")]),a("br"),a("span",{staticClass:"line-number"},[n._v("56")]),a("br"),a("span",{staticClass:"line-number"},[n._v("57")]),a("br"),a("span",{staticClass:"line-number"},[n._v("58")]),a("br"),a("span",{staticClass:"line-number"},[n._v("59")]),a("br"),a("span",{staticClass:"line-number"},[n._v("60")]),a("br"),a("span",{staticClass:"line-number"},[n._v("61")]),a("br"),a("span",{staticClass:"line-number"},[n._v("62")]),a("br"),a("span",{staticClass:"line-number"},[n._v("63")]),a("br"),a("span",{staticClass:"line-number"},[n._v("64")]),a("br"),a("span",{staticClass:"line-number"},[n._v("65")]),a("br"),a("span",{staticClass:"line-number"},[n._v("66")]),a("br"),a("span",{staticClass:"line-number"},[n._v("67")]),a("br"),a("span",{staticClass:"line-number"},[n._v("68")]),a("br"),a("span",{staticClass:"line-number"},[n._v("69")]),a("br"),a("span",{staticClass:"line-number"},[n._v("70")]),a("br"),a("span",{staticClass:"line-number"},[n._v("71")]),a("br"),a("span",{staticClass:"line-number"},[n._v("72")]),a("br"),a("span",{staticClass:"line-number"},[n._v("73")]),a("br"),a("span",{staticClass:"line-number"},[n._v("74")]),a("br"),a("span",{staticClass:"line-number"},[n._v("75")]),a("br"),a("span",{staticClass:"line-number"},[n._v("76")]),a("br"),a("span",{staticClass:"line-number"},[n._v("77")]),a("br"),a("span",{staticClass:"line-number"},[n._v("78")]),a("br"),a("span",{staticClass:"line-number"},[n._v("79")]),a("br"),a("span",{staticClass:"line-number"},[n._v("80")]),a("br"),a("span",{staticClass:"line-number"},[n._v("81")]),a("br"),a("span",{staticClass:"line-number"},[n._v("82")]),a("br"),a("span",{staticClass:"line-number"},[n._v("83")]),a("br"),a("span",{staticClass:"line-number"},[n._v("84")]),a("br"),a("span",{staticClass:"line-number"},[n._v("85")]),a("br"),a("span",{staticClass:"line-number"},[n._v("86")]),a("br"),a("span",{staticClass:"line-number"},[n._v("87")]),a("br"),a("span",{staticClass:"line-number"},[n._v("88")]),a("br"),a("span",{staticClass:"line-number"},[n._v("89")]),a("br"),a("span",{staticClass:"line-number"},[n._v("90")]),a("br"),a("span",{staticClass:"line-number"},[n._v("91")]),a("br"),a("span",{staticClass:"line-number"},[n._v("92")]),a("br"),a("span",{staticClass:"line-number"},[n._v("93")]),a("br"),a("span",{staticClass:"line-number"},[n._v("94")]),a("br"),a("span",{staticClass:"line-number"},[n._v("95")]),a("br"),a("span",{staticClass:"line-number"},[n._v("96")]),a("br"),a("span",{staticClass:"line-number"},[n._v("97")]),a("br"),a("span",{staticClass:"line-number"},[n._v("98")]),a("br"),a("span",{staticClass:"line-number"},[n._v("99")]),a("br"),a("span",{staticClass:"line-number"},[n._v("100")]),a("br"),a("span",{staticClass:"line-number"},[n._v("101")]),a("br"),a("span",{staticClass:"line-number"},[n._v("102")]),a("br"),a("span",{staticClass:"line-number"},[n._v("103")]),a("br"),a("span",{staticClass:"line-number"},[n._v("104")]),a("br"),a("span",{staticClass:"line-number"},[n._v("105")]),a("br"),a("span",{staticClass:"line-number"},[n._v("106")]),a("br"),a("span",{staticClass:"line-number"},[n._v("107")]),a("br"),a("span",{staticClass:"line-number"},[n._v("108")]),a("br"),a("span",{staticClass:"line-number"},[n._v("109")]),a("br"),a("span",{staticClass:"line-number"},[n._v("110")]),a("br"),a("span",{staticClass:"line-number"},[n._v("111")]),a("br"),a("span",{staticClass:"line-number"},[n._v("112")]),a("br"),a("span",{staticClass:"line-number"},[n._v("113")]),a("br"),a("span",{staticClass:"line-number"},[n._v("114")]),a("br"),a("span",{staticClass:"line-number"},[n._v("115")]),a("br"),a("span",{staticClass:"line-number"},[n._v("116")]),a("br"),a("span",{staticClass:"line-number"},[n._v("117")]),a("br"),a("span",{staticClass:"line-number"},[n._v("118")]),a("br"),a("span",{staticClass:"line-number"},[n._v("119")]),a("br"),a("span",{staticClass:"line-number"},[n._v("120")]),a("br"),a("span",{staticClass:"line-number"},[n._v("121")]),a("br"),a("span",{staticClass:"line-number"},[n._v("122")]),a("br"),a("span",{staticClass:"line-number"},[n._v("123")]),a("br"),a("span",{staticClass:"line-number"},[n._v("124")]),a("br"),a("span",{staticClass:"line-number"},[n._v("125")]),a("br"),a("span",{staticClass:"line-number"},[n._v("126")]),a("br"),a("span",{staticClass:"line-number"},[n._v("127")]),a("br")])]),a("h3",{attrs:{id:"_5-2-spring的配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-2-spring的配置"}},[n._v("#")]),n._v(" 5.2.Spring的配置")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n\txmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n\txmlns:p="http://www.springframework.org/schema/p"\n\txmlns:context="http://www.springframework.org/schema/context"\n\txmlns:aop="http://www.springframework.org/schema/aop"\n\txmlns:tx="http://www.springframework.org/schema/tx"\n\txsi:schemaLocation="http://www.springframework.org/schema/beans\n    \t http://www.springframework.org/schema/beans/spring-beans.xsd\n     \t http://www.springframework.org/schema/context\n         http://www.springframework.org/schema/context/spring-context.xsd\n         http://www.springframework.org/schema/aop\n         http://www.springframework.org/schema/aop/spring-aop.xsd\n         http://www.springframework.org/schema/tx\n     \t http://www.springframework.org/schema/tx/spring-tx.xsd">\n\n\t\x3c!-- 开启注解 --\x3e\n\t<context:component-scan\n\t\tbase-package="com.hand"></context:component-scan>\n\t\x3c!-- 1. 数据源对象: C3P0连接池 --\x3e\n\t<bean id="dataSource"\n\t\tclass="com.alibaba.druid.pool.DruidDataSource">\n\t\t\x3c!-- 基本属性 url、user、password --\x3e\n\t\t<property name="driverClassName" value="com.mysql.jdbc.Driver" />\n\t\t<property name="url" value="jdbc:mysql://192.168.188.128:3306/hand_ceshi?useUnicode=true&amp;characterEncoding=UTF-8" />\n\t\t<property name="username" value="root" />\n\t\t<property name="password" value="2452952178" />\n\t</bean>\n\t\n\t\x3c!-- 配置jdbc数据源 --\x3e\n\t<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">\n\t\t<property name="dataSource" ref="dataSource"></property>\n\t</bean>\n</beans>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br")])]),a("h3",{attrs:{id:"_5-3-测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_5-3-测试"}},[n._v("#")]),n._v(" 5.3.测试")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('    @Test\n    public void test3(){\n        ClassPathXmlApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");\n        System.out.println(applicationContext.getBean(JdbcTemplate.class));\n    }\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br")])]),a("h2",{attrs:{id:"_6-spirng事务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-spirng事务"}},[n._v("#")]),n._v(" 6.Spirng事务")]),n._v(" "),a("h3",{attrs:{id:"_6-1-什么是事务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-1-什么是事务"}},[n._v("#")]),n._v(" 6.1.什么是事务？")]),n._v(" "),a("blockquote",[a("p",[n._v("事务是数据库操作最基本单元，逻辑上一组操作，要么都成功，如果有一个失败所有操作都失败。")])]),n._v(" "),a("h3",{attrs:{id:"_6-2-事务特性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-2-事务特性"}},[n._v("#")]),n._v(" 6.2.事务特性")]),n._v(" "),a("ol",[a("li",[n._v("原子性：要么都成功，要么都失败")]),n._v(" "),a("li",[n._v("一致性：操作前前后数据一致性")]),n._v(" "),a("li",[n._v("隔离性：多个事务之间不会产生影响")]),n._v(" "),a("li",[n._v("持久性：保存到库中")])]),n._v(" "),a("h3",{attrs:{id:"_6-3-spring中进行事务管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-3-spring中进行事务管理"}},[n._v("#")]),n._v(" 6.3.Spring中进行事务管理")]),n._v(" "),a("p",[n._v("Spring中进行事务管理有两种方式：")]),n._v(" "),a("ol",[a("li",[n._v("编程式事务：硬编码，在代码中添加事务、提交事务等")]),n._v(" "),a("li",[n._v("声明式事务：\n"),a("ol",[a("li",[a("strong",[n._v("基于注解方式（推荐）")])]),n._v(" "),a("li",[n._v("基于XML文件方式")])])])]),n._v(" "),a("blockquote",[a("p",[n._v("Spring中进行声明式事务是通过AOP来实现的")])]),n._v(" "),a("p",[n._v("Spirng中提供PlatformTransactionManager接口来实现事务：")]),n._v(" "),a("ol",[a("li",[n._v("DataSourceTransactionManager：默认事务、mybatis也使用该事务")]),n._v(" "),a("li",[n._v("HibernateTransactionManager：Hibernate的事务")])]),n._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/2021-07-20_150411.png",alt:"2021-07-20_150411"}})]),n._v(" "),a("h3",{attrs:{id:"_6-4-基于注解的方式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-4-基于注解的方式"}},[n._v("#")]),n._v(" 6.4.基于注解的方式")]),n._v(" "),a("p",[n._v("@Transactional即可实现事务")]),n._v(" "),a("blockquote",[a("p",[n._v("在service类上面(或者service类里面方法上面)添加事务注解")]),n._v(" "),a("p",[n._v("(1）@Transactional，这个注解添加到类上面，也可以添加方法上面·")]),n._v(" "),a("p",[n._v("(2）如果把这个注解添加类上面，这个类里面所有的方法都添加事务")]),n._v(" "),a("p",[n._v("(3）如果把这个注解添加方法上面，为这个方法添加事务")])]),n._v(" "),a("h3",{attrs:{id:"_6-5-事务传播行为"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-5-事务传播行为"}},[n._v("#")]),n._v(" 6.5.事务传播行为")]),n._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/wangchangyin/images@main/hand/image-20210720155902682.png",alt:"image-20210720155902682"}})]),n._v(" "),a("h3",{attrs:{id:"_6-6-spring中七大事务传播"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-6-spring中七大事务传播"}},[n._v("#")]),n._v(" 6.6.spring中七大事务传播：")]),n._v(" "),a("table",[a("thead",[a("tr",[a("th",[n._v("传播属性")]),n._v(" "),a("th",[n._v("描述")])])]),n._v(" "),a("tbody",[a("tr",[a("td",[n._v("REQUIRED")]),n._v(" "),a("td",[n._v("如果有事务在运行，新方法则就用该方法的事务")])]),n._v(" "),a("tr",[a("td",[n._v("REQUIRES_NEW")]),n._v(" "),a("td",[n._v("不管有没有事务，都会另起事务")])]),n._v(" "),a("tr",[a("td",[n._v("SUPPORTS")]),n._v(" "),a("td",[n._v("如果有事务在运行，当前的方法就在这个事务内运行.否则它可以不")])]),n._v(" "),a("tr",[a("td",[n._v("NOT_SUPPORTED")]),n._v(" "),a("td",[n._v("当前方法不应该运行在事务中，如果有运行的事务，把它挂起")])]),n._v(" "),a("tr",[a("td",[n._v("MANDATORY")]),n._v(" "),a("td",[n._v("当前的方法必须运行在事务内部，如果没有正在运行的事务，就抛出异常")])]),n._v(" "),a("tr",[a("td",[n._v("NEVER")]),n._v(" "),a("td",[n._v("当前方法不应该运行在事务中，如果有运行的事务，就抛出异常")])]),n._v(" "),a("tr",[a("td",[n._v("NESTED")]),n._v(" "),a("td",[n._v("如果有事务在运行，当前的方法就应该在这个事务的嵌套事务内运行，否则，就启动一个新的事务，并在它自己的事务内运行")])])])]),n._v(" "),a("h3",{attrs:{id:"_6-7-spring中隔离级别"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-7-spring中隔离级别"}},[n._v("#")]),n._v(" 6.7.Spring中隔离级别")]),n._v(" "),a("p",[n._v("事务有特性成为隔离性，多事务操作之间不会产生影响。不考虑隔离性产生很多问题")]),n._v(" "),a("blockquote",[a("p",[n._v("有三个读问题:脏读、不可重复读、虚（幻）读\n(1）脏读:一个未提交事务读取到另一个未提交事务的数据")]),n._v(" "),a("p",[n._v("(2)\t不可重复读：两次读取到修改的数据")]),n._v(" "),a("p",[n._v("(3)\t幻读：两次读取到添加（或删除）的数据")])]),n._v(" "),a("p",[n._v("事务的隔离级别：")]),n._v(" "),a("table",[a("thead",[a("tr",[a("th"),n._v(" "),a("th",[n._v("脏读")]),n._v(" "),a("th",[n._v("不可重复读")]),n._v(" "),a("th",[n._v("幻读")])])]),n._v(" "),a("tbody",[a("tr",[a("td",[n._v("READ_UNCOMMITTED（读未提交）")]),n._v(" "),a("td",[n._v("有")]),n._v(" "),a("td",[n._v("有")]),n._v(" "),a("td",[n._v("有")])]),n._v(" "),a("tr",[a("td",[n._v("READ_COMMITTED（读提交） oracle默认")]),n._v(" "),a("td",[n._v("无")]),n._v(" "),a("td",[n._v("有")]),n._v(" "),a("td",[n._v("有")])]),n._v(" "),a("tr",[a("td",[n._v("REPEATABLE_READ（可重复读）mysql默认")]),n._v(" "),a("td",[n._v("无")]),n._v(" "),a("td",[n._v("无")]),n._v(" "),a("td",[n._v("有")])]),n._v(" "),a("tr",[a("td",[n._v("SERIALIZABLE（串行化）")]),n._v(" "),a("td",[n._v("无")]),n._v(" "),a("td",[n._v("无")]),n._v(" "),a("td",[n._v("无")])])])]),n._v(" "),a("p",[n._v("Spring设置隔离级别：")]),n._v(" "),a("p",[n._v("Spirng隔离级别默认为数据库的隔离级别，当然也可以修改")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("@Transactional(isolation= Isolation.REPEATABLE_READ)\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br")])]),a("h3",{attrs:{id:"_6-8-transactional其他参数设置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-8-transactional其他参数设置"}},[n._v("#")]),n._v(" 6.8.@Transactional其他参数设置")]),n._v(" "),a("ol",[a("li",[a("p",[n._v("timeout：设置超时时间")]),n._v(" "),a("blockquote",[a("p",[n._v("(1)事务需要在一定时间内进行提交，如果不提交进行回滚·")]),n._v(" "),a("p",[n._v("(2）默认值是-1，设置时间以秒单位进行计算")])])]),n._v(" "),a("li",[a("p",[n._v("readOnly：设置只读")]),n._v(" "),a("blockquote",[a("p",[n._v("(1）读:查询操作，写:添加修改删除操作\n(2) readOnly默认值false，表示可以查询，可以添加修改删除操作")]),n._v(" "),a("p",[n._v("(3）设置readOnly值是true，设置成true之后，只能查询")])])]),n._v(" "),a("li",[a("p",[n._v("rollbackFor：设置哪种异常才回滚")])]),n._v(" "),a("li",[a("p",[n._v("noRollbackFor：设置哪种异常不回滚")])])]),n._v(" "),a("h3",{attrs:{id:"_6-9-注解的方式实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-9-注解的方式实现"}},[n._v("#")]),n._v(" 6.9.注解的方式实现")]),n._v(" "),a("h4",{attrs:{id:"_1-引入依赖"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-引入依赖"}},[n._v("#")]),n._v(" 1.引入依赖")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n\n<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n  xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">\n  <modelVersion>4.0.0</modelVersion>\n\n  <groupId>com.hande</groupId>\n  <artifactId>SSM_demo</artifactId>\n  <version>1.0-SNAPSHOT</version>\n  <packaging>war</packaging>\n\n  <name>SSM_demo Maven Webapp</name>\n  \x3c!-- FIXME change it to the project\'s website --\x3e\n  <url>http://www.example.com</url>\n\n  <properties>\n    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>\n    <maven.compiler.source>1.7</maven.compiler.source>\n    <maven.compiler.target>1.7</maven.compiler.target>\n  </properties>\n\n  <dependencies>\n\n    \x3c!--spring核心依赖--\x3e\n    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-context</artifactId>\n      <version>5.2.6.RELEASE</version>\n    </dependency>\n    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-core</artifactId>\n      <version>5.2.6.RELEASE</version>\n    </dependency>\n    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-aop</artifactId>\n      <version>5.2.6.RELEASE</version>\n    </dependency>\n    <dependency>\n      <groupId>org.springframework</groupId>\n      <artifactId>spring-orm</artifactId>\n      <version>5.2.6.RELEASE</version>\n    </dependency>\n    \x3c!--AOP--\x3e\n    <dependency>\n      <groupId>org.aspectj</groupId>\n      <artifactId>aspectjweaver</artifactId>\n      <version>1.9.4</version>\n    </dependency>\n\n\n\n    \x3c!--阿里巴巴连接池--\x3e\n    <dependency>\n      <groupId>com.alibaba</groupId>\n      <artifactId>druid</artifactId>\n      <version>1.1.10</version>\n    </dependency>\n    <dependency>\n      <groupId>mysql</groupId>\n      <artifactId>mysql-connector-java</artifactId>\n      <version>5.1.25</version>\n    </dependency>\n\n\n    \x3c!--junit测试依赖--\x3e\n    <dependency>\n      <groupId>org.hamcrest</groupId>\n      <artifactId>hamcrest-core</artifactId>\n      <version>2.2</version>\n      <scope>test</scope>\n    </dependency>\n    <dependency>\n      <groupId>org.junit.jupiter</groupId>\n      <artifactId>junit-jupiter-api</artifactId>\n      <version>RELEASE</version>\n    </dependency>\n\n  </dependencies>\n\n  <build>\n    <finalName>SSM_demo</finalName>\n    <pluginManagement>\x3c!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --\x3e\n      <plugins>\n        <plugin>\n          <artifactId>maven-clean-plugin</artifactId>\n          <version>3.1.0</version>\n        </plugin>\n        \x3c!-- see http://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_war_packaging --\x3e\n        <plugin>\n          <artifactId>maven-resources-plugin</artifactId>\n          <version>3.0.2</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-compiler-plugin</artifactId>\n          <version>3.8.0</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-surefire-plugin</artifactId>\n          <version>2.22.1</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-war-plugin</artifactId>\n          <version>3.2.2</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-install-plugin</artifactId>\n          <version>2.5.2</version>\n        </plugin>\n        <plugin>\n          <artifactId>maven-deploy-plugin</artifactId>\n          <version>2.8.2</version>\n        </plugin>\n      </plugins>\n    </pluginManagement>\n  </build>\n</project>\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br"),a("span",{staticClass:"line-number"},[n._v("46")]),a("br"),a("span",{staticClass:"line-number"},[n._v("47")]),a("br"),a("span",{staticClass:"line-number"},[n._v("48")]),a("br"),a("span",{staticClass:"line-number"},[n._v("49")]),a("br"),a("span",{staticClass:"line-number"},[n._v("50")]),a("br"),a("span",{staticClass:"line-number"},[n._v("51")]),a("br"),a("span",{staticClass:"line-number"},[n._v("52")]),a("br"),a("span",{staticClass:"line-number"},[n._v("53")]),a("br"),a("span",{staticClass:"line-number"},[n._v("54")]),a("br"),a("span",{staticClass:"line-number"},[n._v("55")]),a("br"),a("span",{staticClass:"line-number"},[n._v("56")]),a("br"),a("span",{staticClass:"line-number"},[n._v("57")]),a("br"),a("span",{staticClass:"line-number"},[n._v("58")]),a("br"),a("span",{staticClass:"line-number"},[n._v("59")]),a("br"),a("span",{staticClass:"line-number"},[n._v("60")]),a("br"),a("span",{staticClass:"line-number"},[n._v("61")]),a("br"),a("span",{staticClass:"line-number"},[n._v("62")]),a("br"),a("span",{staticClass:"line-number"},[n._v("63")]),a("br"),a("span",{staticClass:"line-number"},[n._v("64")]),a("br"),a("span",{staticClass:"line-number"},[n._v("65")]),a("br"),a("span",{staticClass:"line-number"},[n._v("66")]),a("br"),a("span",{staticClass:"line-number"},[n._v("67")]),a("br"),a("span",{staticClass:"line-number"},[n._v("68")]),a("br"),a("span",{staticClass:"line-number"},[n._v("69")]),a("br"),a("span",{staticClass:"line-number"},[n._v("70")]),a("br"),a("span",{staticClass:"line-number"},[n._v("71")]),a("br"),a("span",{staticClass:"line-number"},[n._v("72")]),a("br"),a("span",{staticClass:"line-number"},[n._v("73")]),a("br"),a("span",{staticClass:"line-number"},[n._v("74")]),a("br"),a("span",{staticClass:"line-number"},[n._v("75")]),a("br"),a("span",{staticClass:"line-number"},[n._v("76")]),a("br"),a("span",{staticClass:"line-number"},[n._v("77")]),a("br"),a("span",{staticClass:"line-number"},[n._v("78")]),a("br"),a("span",{staticClass:"line-number"},[n._v("79")]),a("br"),a("span",{staticClass:"line-number"},[n._v("80")]),a("br"),a("span",{staticClass:"line-number"},[n._v("81")]),a("br"),a("span",{staticClass:"line-number"},[n._v("82")]),a("br"),a("span",{staticClass:"line-number"},[n._v("83")]),a("br"),a("span",{staticClass:"line-number"},[n._v("84")]),a("br"),a("span",{staticClass:"line-number"},[n._v("85")]),a("br"),a("span",{staticClass:"line-number"},[n._v("86")]),a("br"),a("span",{staticClass:"line-number"},[n._v("87")]),a("br"),a("span",{staticClass:"line-number"},[n._v("88")]),a("br"),a("span",{staticClass:"line-number"},[n._v("89")]),a("br"),a("span",{staticClass:"line-number"},[n._v("90")]),a("br"),a("span",{staticClass:"line-number"},[n._v("91")]),a("br"),a("span",{staticClass:"line-number"},[n._v("92")]),a("br"),a("span",{staticClass:"line-number"},[n._v("93")]),a("br"),a("span",{staticClass:"line-number"},[n._v("94")]),a("br"),a("span",{staticClass:"line-number"},[n._v("95")]),a("br"),a("span",{staticClass:"line-number"},[n._v("96")]),a("br"),a("span",{staticClass:"line-number"},[n._v("97")]),a("br"),a("span",{staticClass:"line-number"},[n._v("98")]),a("br"),a("span",{staticClass:"line-number"},[n._v("99")]),a("br"),a("span",{staticClass:"line-number"},[n._v("100")]),a("br"),a("span",{staticClass:"line-number"},[n._v("101")]),a("br"),a("span",{staticClass:"line-number"},[n._v("102")]),a("br"),a("span",{staticClass:"line-number"},[n._v("103")]),a("br"),a("span",{staticClass:"line-number"},[n._v("104")]),a("br"),a("span",{staticClass:"line-number"},[n._v("105")]),a("br"),a("span",{staticClass:"line-number"},[n._v("106")]),a("br"),a("span",{staticClass:"line-number"},[n._v("107")]),a("br"),a("span",{staticClass:"line-number"},[n._v("108")]),a("br"),a("span",{staticClass:"line-number"},[n._v("109")]),a("br"),a("span",{staticClass:"line-number"},[n._v("110")]),a("br"),a("span",{staticClass:"line-number"},[n._v("111")]),a("br"),a("span",{staticClass:"line-number"},[n._v("112")]),a("br"),a("span",{staticClass:"line-number"},[n._v("113")]),a("br"),a("span",{staticClass:"line-number"},[n._v("114")]),a("br"),a("span",{staticClass:"line-number"},[n._v("115")]),a("br"),a("span",{staticClass:"line-number"},[n._v("116")]),a("br"),a("span",{staticClass:"line-number"},[n._v("117")]),a("br"),a("span",{staticClass:"line-number"},[n._v("118")]),a("br"),a("span",{staticClass:"line-number"},[n._v("119")]),a("br")])]),a("h4",{attrs:{id:"_2-spring配置"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-spring配置"}},[n._v("#")]),n._v(" 2.spring配置")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:tx="http://www.springframework.org/schema/tx"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans.xsd\n                        http://www.springframework.org/schema/context\n                        http://www.springframework.org/schema/context/spring-context.xsd\n                        http://www.springframework.org/schema/tx\n                        http://www.springframework.org/schema/tx/spring-tx.xsd">\n\n    \x3c!-- 开启注解扫包 --\x3e\n    <context:component-scan\n            base-package="com.hand"></context:component-scan>\n        \x3c!-- 数据源 --\x3e    \n    <bean id="dataSource"\n          class="com.alibaba.druid.pool.DruidDataSource">\n        \x3c!-- 基本属性 url、user、password --\x3e\n        <property name="driverClassName" value="com.mysql.jdbc.Driver" />\n        <property name="url" value="jdbc:mysql://192.168.188.128:3306/hand_ceshi?useUnicode=true&amp;characterEncoding=UTF-8" />\n        <property name="username" value="root" />\n        <property name="password" value="2452952178" />\n    </bean>\n\n    \x3c!-- 配置jdbc数据源 --\x3e\n    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">\n        <property name="dataSource" ref="dataSource"></property>\n    </bean>\n    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">\n        <property name="dataSource" ref="dataSource"></property>\n    </bean>\n    \x3c!--开启事务注解--\x3e\n    <tx:annotation-driven transaction-manager="transactionManager"></tx:annotation-driven>\n</beans>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br")])]),a("h4",{attrs:{id:"_3-servicedemo"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-servicedemo"}},[n._v("#")]),n._v(" 3.servicedemo")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand.service;\n\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\n@Service\n@Transactional\npublic class TransactionalService {\n    @Autowired\n    private JdbcTemplate jdbcTemplate;\n\n    public void transactionalDemo(){\n        jdbcTemplate.update("update user set usex=20 where uid=1");\n        int a=1/0;\n        jdbcTemplate.update("update user set usex=20 where uid=4");\n    }\n}\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br")])]),a("p",[n._v("4.测试")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('    //事务测试\n    @Test\n    public void test4(){\n        ClassPathXmlApplicationContext applicationContext = new ClassPathXmlApplicationContext("applicationContext.xml");\n        TransactionalService bean = applicationContext.getBean(TransactionalService.class);\n        bean.transactionalDemo();\n    }\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br")])]),a("h3",{attrs:{id:"_6-10-xml文件的方式实现"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-10-xml文件的方式实现"}},[n._v("#")]),n._v(" 6.10.XML文件的方式实现")]),n._v(" "),a("p",[n._v("与上方一样，不过spring的配置文件不同：")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:tx="http://www.springframework.org/schema/tx"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xmlns:aop="http://www.springframework.org/schema/aop"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n                        http://www.springframework.org/schema/beans/spring-beans.xsd\n                        http://www.springframework.org/schema/context\n                        http://www.springframework.org/schema/context/spring-context.xsd\n                        http://www.springframework.org/schema/tx\n                        http://www.springframework.org/schema/tx/spring-tx.xsd\n                        http://www.springframework.org/schema/aop\n                        http://www.springframework.org/schema/aop/spring-aop.xsd">\n    \x3c!-- 开启注解扫包 --\x3e\n    <context:component-scan\n            base-package="com.hand"></context:component-scan>\n    \x3c!-- 1. 数据源对象: C3P0连接池 --\x3e\n    <bean id="dataSource"\n          class="com.alibaba.druid.pool.DruidDataSource">\n        \x3c!-- 基本属性 url、user、password --\x3e\n        <property name="driverClassName" value="com.mysql.jdbc.Driver" />\n        <property name="url" value="jdbc:mysql://192.168.188.128:3306/hand_ceshi?useUnicode=true&amp;characterEncoding=UTF-8" />\n        <property name="username" value="root" />\n        <property name="password" value="2452952178" />\n    </bean>\n\n    \x3c!-- 配置jdbc数据源 --\x3e\n    <bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">\n        <property name="dataSource" ref="dataSource"></property>\n    </bean>\n    <bean id="transactionManager" class="org.springframework.jdbc.datasource.DataSourceTransactionManager">\n        <property name="dataSource" ref="dataSource"></property>\n    </bean>\n    \x3c!--XML文件的方式--\x3e\n\n    \x3c!--定义增强 对事务进行增强（通知），需要编写切入点和具体执行事务的细节--\x3e\n    <tx:advice id="myAdvice">\n        <tx:attributes>\n            \x3c!-- 给切入点方法添加事务详情，name表示方法名称，*表示任意方法名称，\n            propagation用于设置传播行为，read-only表示隔离级别，是否只读 --\x3e\n            <tx:method name="find*" propagation="SUPPORTS"\n                       rollback-for="Exception" />\n            <tx:method name="*" propagation="REQUIRED" isolation="DEFAULT"\n                       read-only="false" />\n        </tx:attributes>\n    </tx:advice>\n    \x3c!--aop--\x3e\n    <aop:config>\n        \x3c!--定义切入点，哪些地方需要被增强--\x3e\n        <aop:pointcut id="myPoint" expression="execution(* com.hand.*.*.*(..))"/>\n        \x3c!--将切入点与通知(事务)整合--\x3e\n        <aop:advisor advice-ref="myAdvice" pointcut-ref="myPoint"></aop:advisor>\n    </aop:config>\n</beans>\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br"),a("span",{staticClass:"line-number"},[n._v("46")]),a("br"),a("span",{staticClass:"line-number"},[n._v("47")]),a("br"),a("span",{staticClass:"line-number"},[n._v("48")]),a("br"),a("span",{staticClass:"line-number"},[n._v("49")]),a("br"),a("span",{staticClass:"line-number"},[n._v("50")]),a("br"),a("span",{staticClass:"line-number"},[n._v("51")]),a("br"),a("span",{staticClass:"line-number"},[n._v("52")]),a("br"),a("span",{staticClass:"line-number"},[n._v("53")]),a("br"),a("span",{staticClass:"line-number"},[n._v("54")]),a("br"),a("span",{staticClass:"line-number"},[n._v("55")]),a("br")])]),a("h3",{attrs:{id:"_6-11-完全注解开发"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_6-11-完全注解开发"}},[n._v("#")]),n._v(" 6.11.完全注解开发")]),n._v(" "),a("h4",{attrs:{id:"_1-spring配置文件换成配置类"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-spring配置文件换成配置类"}},[n._v("#")]),n._v(" 1.spring配置文件换成配置类")]),n._v(" "),a("p",[n._v('注意注意：有可能有多个配置类，一定要注意@ComponentScan(basePackages = "com.hand") 只能注册一定，不然会重复注册bean；')]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package com.hand.config;\n\nimport com.alibaba.druid.pool.DruidDataSource;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.ComponentScan;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.jdbc.core.JdbcTemplate;\nimport org.springframework.jdbc.datasource.DataSourceTransactionManager;\nimport org.springframework.transaction.annotation.EnableTransactionManagement;\n\nimport javax.sql.DataSource;\n\n@Configuration//配置类\n@ComponentScan(basePackages = "com.hand")  //扫包\n@EnableTransactionManagement //开启事务\npublic class TransactionalConfig {\n    /**\n     * 配置数据源\n     * @return\n     */\n    @Bean(name = "dataSource")\n    public DataSource getDruidDataSource(){\n        DruidDataSource druidDataSource=new DruidDataSource();\n        druidDataSource.setDriverClassName("com.mysql.jdbc.Driver");\n        druidDataSource.setUrl("jdbc:mysql://192.168.188.128:3306/hand_ceshi?useUnicode=true&amp;characterEncoding=UTF-8");\n        druidDataSource.setUsername("root");\n        druidDataSource.setPassword("2452952178");\n        return druidDataSource;\n    }\n\n    /**\n     * 配置JdbcTemplate\n     * @param dataSource\n     * @return\n     */\n    @Bean\n    public JdbcTemplate getJdbcTemplate(DataSource dataSource){\n        JdbcTemplate jdbcTemplate=new JdbcTemplate();\n        jdbcTemplate.setDataSource(dataSource);\n        return jdbcTemplate;\n    }\n\n    /**\n     * 配置事务管理器\n     * @param dataSource\n     * @return\n     */\n    @Bean\n    public DataSourceTransactionManager getDataSourceTransactionManager(DataSource dataSource){\n        DataSourceTransactionManager transactionManager=new DataSourceTransactionManager();\n        transactionManager.setDataSource(dataSource);\n        return transactionManager;\n    }\n}\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br"),a("span",{staticClass:"line-number"},[n._v("46")]),a("br"),a("span",{staticClass:"line-number"},[n._v("47")]),a("br"),a("span",{staticClass:"line-number"},[n._v("48")]),a("br"),a("span",{staticClass:"line-number"},[n._v("49")]),a("br"),a("span",{staticClass:"line-number"},[n._v("50")]),a("br"),a("span",{staticClass:"line-number"},[n._v("51")]),a("br"),a("span",{staticClass:"line-number"},[n._v("52")]),a("br"),a("span",{staticClass:"line-number"},[n._v("53")]),a("br"),a("span",{staticClass:"line-number"},[n._v("54")]),a("br")])]),a("h4",{attrs:{id:"_2-测试"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-测试"}},[n._v("#")]),n._v(" 2.测试")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v("    //事务全注解测试\n    @Test\n    public void test5(){\n        ApplicationContext applicationContext = new AnnotationConfigApplicationContext(TransactionalConfig.class);\n        TransactionalService bean = applicationContext.getBean(TransactionalService.class);\n        bean.transactionalDemo();\n\n    }\n")])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br")])])])}),[],!1,null,null,null);s.default=t.exports}}]);