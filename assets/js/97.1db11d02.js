(window.webpackJsonp=window.webpackJsonp||[]).push([[97],{542:function(a,s,e){"use strict";e.r(s);var n=e(8),t=Object(n.a)({},(function(){var a=this,s=a.$createElement,e=a._self._c||s;return e("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[e("h1",{attrs:{id:"docker基础-仓库-镜像-容器详解"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker基础-仓库-镜像-容器详解"}},[a._v("#")]),a._v(" Docker基础 - 仓库，镜像，容器详解")]),a._v(" "),e("blockquote",[e("p",[a._v("本文将从仓库，镜像，容器三个方面讲解常用的docker命令和使用等，对于开发而言这块使用的非常频繁，需要重点掌握。")])]),a._v(" "),e("h2",{attrs:{id:"仓库-镜像-容器的关系"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#仓库-镜像-容器的关系"}},[a._v("#")]),a._v(" 仓库，镜像，容器的关系")]),a._v(" "),e("blockquote",[e("p",[a._v("仓库，镜像，容器的关系（这是官网的图）")])]),a._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wcy_dch/images/raw/master/img/docker-architecture.svg",alt:"img"}})]),a._v(" "),e("h2",{attrs:{id:"docker-镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-镜像"}},[a._v("#")]),a._v(" Docker 镜像")]),a._v(" "),e("p",[a._v("当运行容器时，使用的镜像如果在本地中不存在，docker 就会自动从 docker 镜像仓库中下载，默认是从 Docker Hub 公共镜像源下载。")]),a._v(" "),e("p",[a._v("下面我们来学 1、管理和使用本地 Docker 主机镜像 2、创建镜像")]),a._v(" "),e("h3",{attrs:{id:"镜像列表"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#镜像列表"}},[a._v("#")]),a._v(" 镜像列表")]),a._v(" "),e("p",[a._v("我们可以使用 docker images 来列出本地主机上的镜像")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai ~]# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nubuntu              latest              ccc6e87d482b        4 weeks ago         64.2MB\nhello-world         latest              fce289e99eb9        13 months ago       1.84kB\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[a._v("著作权归https://pdai.tech所有。 链接：https://www.pdai.tech/md/devops/docker/docker-03-basic2.html")]),a._v(" "),e("p",[a._v("各个选项说明:")]),a._v(" "),e("ul",[e("li",[a._v("REPOSITORY：表示镜像的仓库源")]),a._v(" "),e("li",[a._v("TAG：镜像的标签, 同一仓库源可以有多个 TAG，代表这个仓库源的不同个版本")]),a._v(" "),e("li",[a._v("IMAGE ID：镜像ID")]),a._v(" "),e("li",[a._v("CREATED：镜像创建时间")]),a._v(" "),e("li",[a._v("SIZE：镜像大小")])]),a._v(" "),e("h3",{attrs:{id:"查找镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#查找镜像"}},[a._v("#")]),a._v(" 查找镜像")]),a._v(" "),e("blockquote",[e("p",[a._v("以查找MySQL的镜像为例：")])]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("通过Docker Hub 进行查找")]),a._v(", 比如https://hub.docker.com/search?q=mysql&type=image")])]),a._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wcy_dch/images/raw/master/img/20211019172817.png",alt:"img"}})]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("使用 docker search 命令来搜索镜像")])])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai ~]# docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n[root@pdai ~]# docker search mysql\nNAME                              DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED\nmysql                             MySQL is a widely used, open-source relation…   9132                [OK]\nmariadb                           MariaDB is a community-developed fork of MyS…   3233                [OK]\nmysql/mysql-server                Optimized MySQL Server Docker images. Create…   676                                     [OK]\ncentos/mysql-57-centos7           MySQL 5.7 SQL database server                   68\nmysql/mysql-cluster               Experimental MySQL Cluster Docker images. Cr…   62\ncenturylink/mysql                 Image containing mysql. Optimized to be link…   61                                      [OK]\ndeitch/mysql-backup               REPLACED! Please use http://hub.docker.com/r…   41                                      [OK]\nbitnami/mysql                     Bitnami MySQL Docker Image                      35                                      [OK]\ntutum/mysql                       Base docker image to run a MySQL database se…   34\nschickling/mysql-backup-s3        Backup MySQL to S3 (supports periodic backup…   29                                      [OK]\nprom/mysqld-exporter                                                              26                                      [OK]\nlinuxserver/mysql                 A Mysql container, brought to you by LinuxSe…   24\ncentos/mysql-56-centos7           MySQL 5.6 SQL database server                   19\ncircleci/mysql                    MySQL is a widely used, open-source relation…   18\nmysql/mysql-router                MySQL Router provides transparent routing be…   14\narey/mysql-client                 Run a MySQL client from a docker container      13                                      [OK]\ndataback/mysql-backup             Back up mysql databases to... anywhere!         10\nopenshift/mysql-55-centos7        DEPRECATED: A Centos7 based MySQL v5.5 image…   6\nfradelg/mysql-cron-backup         MySQL/MariaDB database backup using cron tas…   5                                       [OK]\ngenschsa/mysql-employees          MySQL Employee Sample Database                  4                                       [OK]\ndevilbox/mysql                    Retagged MySQL, MariaDB and PerconaDB offici…   2\nansibleplaybookbundle/mysql-apb   An APB which deploys RHSCL MySQL                2                                       [OK]\njelastic/mysql                    An image of the MySQL database server mainta…   1\nmonasca/mysql-init                A minimal decoupled init container for mysql    0\nwiddpim/mysql-client              Dockerized MySQL Client (5.7) including Curl…   0                                       [OK]\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br"),e("span",{staticClass:"line-number"},[a._v("20")]),e("br"),e("span",{staticClass:"line-number"},[a._v("21")]),e("br"),e("span",{staticClass:"line-number"},[a._v("22")]),e("br"),e("span",{staticClass:"line-number"},[a._v("23")]),e("br"),e("span",{staticClass:"line-number"},[a._v("24")]),e("br"),e("span",{staticClass:"line-number"},[a._v("25")]),e("br"),e("span",{staticClass:"line-number"},[a._v("26")]),e("br"),e("span",{staticClass:"line-number"},[a._v("27")]),e("br"),e("span",{staticClass:"line-number"},[a._v("28")]),e("br"),e("span",{staticClass:"line-number"},[a._v("29")]),e("br")])]),e("ul",[e("li",[a._v("NAME: 镜像仓库源的名称")]),a._v(" "),e("li",[a._v("DESCRIPTION: 镜像的描述")]),a._v(" "),e("li",[a._v("OFFICIAL: 是否 docker 官方发布")]),a._v(" "),e("li",[a._v("STARS: 类似 Github 里面的 star，表示点赞、喜欢的意思。")]),a._v(" "),e("li",[a._v("AUTOMATED: 自动构建。")])]),a._v(" "),e("h3",{attrs:{id:"拉取镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#拉取镜像"}},[a._v("#")]),a._v(" 拉取镜像")]),a._v(" "),e("blockquote",[e("p",[a._v("现在拉取搜索出的MySQL")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai ~]# docker pull mysql\nUsing default tag: latest\nlatest: Pulling from library/mysql\n619014d83c02: Pull complete\n9ced578c3a5f: Pull complete\n731f6e13d8ea: Pull complete\n3c183de42679: Pull complete\n6de69b5c2f3c: Pull complete\n00f0a4086406: Pull complete\n84d93aea836d: Pull complete\nf18efbfd8d76: Pull complete\n012b302865d1: Pull complete\nfe16fd240f59: Pull complete\nca3e793e545e: Pull complete\n51d0f2cb2610: Pull complete\nDigest: sha256:6d0741319b6a2ae22c384a97f4bbee411b01e75f6284af0cce339fee83d7e314\nStatus: Downloaded newer image for mysql:latest\ndocker.io/library/mysql:latest\n[root@pdai ~]# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nmysql               latest              791b6e40940c        2 weeks ago         465MB\nubuntu              latest              ccc6e87d482b        4 weeks ago         64.2MB\nhello-world         latest              fce289e99eb9        13 months ago       1.84kB\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br"),e("span",{staticClass:"line-number"},[a._v("20")]),e("br"),e("span",{staticClass:"line-number"},[a._v("21")]),e("br"),e("span",{staticClass:"line-number"},[a._v("22")]),e("br"),e("span",{staticClass:"line-number"},[a._v("23")]),e("br")])]),e("h3",{attrs:{id:"删除镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#删除镜像"}},[a._v("#")]),a._v(" 删除镜像")]),a._v(" "),e("blockquote",[e("p",[a._v("是时候删除那个无聊的hello-world镜像了")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('[root@pdai ~]# docker rmi hello-world\nError response from daemon: conflict: unable to remove repository reference "hello-world" (must force) - container c91b90b18884 is using its referenced image fce289e99eb9\n[root@pdai ~]# docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[a._v("发现报错了，这时候主要看两点：要么就是container实例存在，要么存在镜像依赖；")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('[root@pdai ~]# docker ps -a\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                     PORTS               NAMES\n1a51d2f023c9        ubuntu:latest       "/bin/sh -c \'while t…"   2 hours ago         Exited (137) 2 hours ago                       gifted_brown\n414bf796cbe4        ubuntu:latest       "/bin/bash"              2 hours ago         Exited (0) 2 hours ago                         pedantic_galileo\n512061ebfa4c        ubuntu:latest       "/bin/bash"              2 hours ago         Exited (0) 2 hours ago                         wizardly_brown\naa5e9ae5e5db        ubuntu:latest       "/bin/echo \'Hello wo…"   2 hours ago         Exited (0) 2 hours ago                         affectionate_knuth\nc91b90b18884        hello-world         "/hello"                 3 hours ago         Exited (0) 3 hours ago                         admiring_pare\n[root@pdai ~]# docker image inspect --format=\'{{.RepoTags}} {{.Id}} {{.Parent}}\' $(docker image ls -q )\n[mysql:latest] sha256:791b6e40940cd550af522eb4ffe995226798204504fe495743445b900e417a51\n[ubuntu:latest] sha256:ccc6e87d482b79dd1645affd958479139486e47191dfe7a997c862d89cd8b4c0\n[hello-world:latest] sha256:fce289e99eb9bca977dae136fbe2a82b6b7d4c372474c9235adc1741675f587e\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br")])]),e("p",[a._v("显然，我们只要删除container即可：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('[root@pdai ~]# docker rm c91b90b18884\nc91b90b18884\n[root@pdai ~]# docker ps -a\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                     PORTS               NAMES\n1a51d2f023c9        ubuntu:latest       "/bin/sh -c \'while t…"   2 hours ago         Exited (137) 2 hours ago                       gifted_brown\n414bf796cbe4        ubuntu:latest       "/bin/bash"              2 hours ago         Exited (0) 2 hours ago                         pedantic_galileo\n512061ebfa4c        ubuntu:latest       "/bin/bash"              2 hours ago         Exited (0) 2 hours ago                         wizardly_brown\naa5e9ae5e5db        ubuntu:latest       "/bin/echo \'Hello wo…"   2 hours ago         Exited (0) 2 hours ago                         affectionate_knuth\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br")])]),e("p",[a._v("最后再来删除镜像吧")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai ~]# docker rmi hello-world\nUntagged: hello-world:latest\nUntagged: hello-world@sha256:9572f7cdcee8591948c2963463447a53466950b3fc15a247fcad1917ca215a2f\nDeleted: sha256:fce289e99eb9bca977dae136fbe2a82b6b7d4c372474c9235adc1741675f587e\nDeleted: sha256:af0b15c8625bb1938f1d7b17081031f649fd14e6b233688eea3c5483994a66a3\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("h3",{attrs:{id:"更新镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#更新镜像"}},[a._v("#")]),a._v(" 更新镜像")]),a._v(" "),e("blockquote",[e("p",[a._v("针对上述ubuntu的镜像，我们能否在里面安装一些软件，然后重新生成一个镜像呢？这就是更新重新commit出一个新的镜像。")])]),a._v(" "),e("p",[a._v("我们先跑一个ubuntu容器实例，同时在里面进行"),e("code",[a._v("apt-get update")]),a._v("更新")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai ~]# docker run -it ubuntu:latest\nroot@0a1556ca3c27:/# apt-get update\nGet:1 http://security.ubuntu.com/ubuntu bionic-security InRelease [88.7 kB]\nGet:2 http://archive.ubuntu.com/ubuntu bionic InRelease [242 kB]\nGet:3 http://archive.ubuntu.com/ubuntu bionic-updates InRelease [88.7 kB]\nGet:4 http://archive.ubuntu.com/ubuntu bionic-backports InRelease [74.6 kB]\nGet:5 http://security.ubuntu.com/ubuntu bionic-security/main amd64 Packages [817 kB]\nGet:6 http://archive.ubuntu.com/ubuntu bionic/main amd64 Packages [1344 kB]\nGet:7 http://archive.ubuntu.com/ubuntu bionic/multiverse amd64 Packages [186 kB]\nGet:8 http://archive.ubuntu.com/ubuntu bionic/restricted amd64 Packages [13.5 kB]\nGet:9 http://archive.ubuntu.com/ubuntu bionic/universe amd64 Packages [11.3 MB]\nGet:10 http://security.ubuntu.com/ubuntu bionic-security/restricted amd64 Packages [27.5 kB]\nGet:11 http://security.ubuntu.com/ubuntu bionic-security/multiverse amd64 Packages [7064 B]\nGet:12 http://security.ubuntu.com/ubuntu bionic-security/universe amd64 Packages [818 kB]\nGet:13 http://archive.ubuntu.com/ubuntu bionic-updates/multiverse amd64 Packages [11.1 kB]\nGet:14 http://archive.ubuntu.com/ubuntu bionic-updates/universe amd64 Packages [1345 kB]\nGet:15 http://archive.ubuntu.com/ubuntu bionic-updates/restricted amd64 Packages [41.2 kB]\nGet:16 http://archive.ubuntu.com/ubuntu bionic-updates/main amd64 Packages [1104 kB]\nGet:17 http://archive.ubuntu.com/ubuntu bionic-backports/universe amd64 Packages [4252 B]\nGet:18 http://archive.ubuntu.com/ubuntu bionic-backports/main amd64 Packages [2496 B]\nFetched 17.6 MB in 10s (1759 kB/s)\nReading package lists... Done\nroot@0a1556ca3c27:/# exit\nexit\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br"),e("span",{staticClass:"line-number"},[a._v("20")]),e("br"),e("span",{staticClass:"line-number"},[a._v("21")]),e("br"),e("span",{staticClass:"line-number"},[a._v("22")]),e("br"),e("span",{staticClass:"line-number"},[a._v("23")]),e("br"),e("span",{staticClass:"line-number"},[a._v("24")]),e("br")])]),e("p",[a._v("此时 ID 为 0a1556ca3c27 的容器，是按我们的需求更改的容器。我们可以通过命令 docker commit 来提交容器副本：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('[root@pdai ~]# docker commit -m="update test" -a="pdai" 0a1556ca3c27  pdai/ubuntu:v1.0.1\nsha256:b51e9f5f98cdb5b95c34181148ed7029f0150618aa8cd0e916b10b6aea1bd4c9\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br")])]),e("p",[a._v("可以看到已经生成成功, 且镜像的大小不一样了：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai ~]# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\npdai/ubuntu         v1.0.1              b51e9f5f98cd        5 seconds ago       92.1MB\nmysql               latest              791b6e40940c        2 weeks ago         465MB\nubuntu              latest              ccc6e87d482b        4 weeks ago         64.2MB\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("p",[a._v("著作权归https://pdai.tech所有。 链接：https://www.pdai.tech/md/devops/docker/docker-03-basic2.html")]),a._v(" "),e("h3",{attrs:{id:"生成镜像"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#生成镜像"}},[a._v("#")]),a._v(" 生成镜像")]),a._v(" "),e("blockquote",[e("p",[a._v("那如果是生成一个全新的镜像呢？我们使用命令 docker build ，通过创建一个 Dockerfile 文件，其中包含一组指令来告诉 Docker 如何构建我们的镜像。")])]),a._v(" "),e("p",[a._v("这里特意指定的Base镜像为上一步修改生成的"),e("code",[a._v("pdai/ubuntu:v1.0.1")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('FROM    pdai/ubuntu:v1.0.1\nMAINTAINER      pdai "www.pdai.tech"\n\nRUN     /bin/echo \'root:123456\' |chpasswd\nRUN     useradd pdai\nRUN     /bin/echo \'pdai:123456\' |chpasswd\nRUN     /bin/echo -e "LANG=\\"en_US.UTF-8\\"" >/etc/default/local\nEXPOSE  22\nEXPOSE  80\nCMD     /usr/sbin/sshd -D\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br")])]),e("p",[e("strong",[a._v("稍微解释下")]),a._v("：这一部分在开发中会用到比较多，所以单独一个章节详解："),e("a",{attrs:{href:""}},[a._v("Docker基础 - dockerfile详解")])]),a._v(" "),e("ul",[e("li",[a._v("每一个指令都会在镜像上创建一个新的层，每一个指令的前缀都必须是大写的。")]),a._v(" "),e("li",[a._v("第一条FROM，指定使用哪个镜像源")]),a._v(" "),e("li",[a._v("RUN 指令告诉docker 在镜像内执行命令，安装了什么。。。")]),a._v(" "),e("li",[a._v("我们使用 Dockerfile 文件，通过 docker build 命令来构建一个镜像。")])]),a._v(" "),e("p",[a._v("接下来生成镜像：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('[root@pdai docker-test]# docker build -t pdai/ubuntu:v2.0.1 .\nSending build context to Docker daemon  2.048kB\nStep 1/9 : FROM    pdai/ubuntu:v1.0.1\n ---\x3e b51e9f5f98cd\nStep 2/9 : MAINTAINER      pdai "www.pdai.tech"\n ---\x3e Running in af026ee229ea\nRemoving intermediate container af026ee229ea\n ---\x3e 0e961cb557c9\nStep 3/9 : RUN     /bin/echo \'root:123456\' |chpasswd\n ---\x3e Running in 96bd9c40c55e\nRemoving intermediate container 96bd9c40c55e\n ---\x3e 9e8549720043\nStep 4/9 : RUN     useradd pdai\n ---\x3e Running in 0117278f243c\nRemoving intermediate container 0117278f243c\n ---\x3e 87c478df56da\nStep 5/9 : RUN     /bin/echo \'pdai:123456\' |chpasswd\n ---\x3e Running in e0381eabe71a\nRemoving intermediate container e0381eabe71a\n ---\x3e 84fd07f978ae\nStep 6/9 : RUN     /bin/echo -e "LANG=\\"en_US.UTF-8\\"" >/etc/default/local\n ---\x3e Running in 8d0052d9921f\nRemoving intermediate container 8d0052d9921f\n ---\x3e 3ed0b248224c\nStep 7/9 : EXPOSE  22\n ---\x3e Running in 4b5d540567cd\nRemoving intermediate container 4b5d540567cd\n ---\x3e c0a72ad140dd\nStep 8/9 : EXPOSE  80\n ---\x3e Running in c9620707d038\nRemoving intermediate container c9620707d038\n ---\x3e df42b714ecc1\nStep 9/9 : CMD     /usr/sbin/sshd -D\n ---\x3e Running in e178826b43fe\nRemoving intermediate container e178826b43fe\n ---\x3e a733d5a264b5\nSuccessfully built a733d5a264b5\nSuccessfully tagged pdai/ubuntu:v2.0.1\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br"),e("span",{staticClass:"line-number"},[a._v("18")]),e("br"),e("span",{staticClass:"line-number"},[a._v("19")]),e("br"),e("span",{staticClass:"line-number"},[a._v("20")]),e("br"),e("span",{staticClass:"line-number"},[a._v("21")]),e("br"),e("span",{staticClass:"line-number"},[a._v("22")]),e("br"),e("span",{staticClass:"line-number"},[a._v("23")]),e("br"),e("span",{staticClass:"line-number"},[a._v("24")]),e("br"),e("span",{staticClass:"line-number"},[a._v("25")]),e("br"),e("span",{staticClass:"line-number"},[a._v("26")]),e("br"),e("span",{staticClass:"line-number"},[a._v("27")]),e("br"),e("span",{staticClass:"line-number"},[a._v("28")]),e("br"),e("span",{staticClass:"line-number"},[a._v("29")]),e("br"),e("span",{staticClass:"line-number"},[a._v("30")]),e("br"),e("span",{staticClass:"line-number"},[a._v("31")]),e("br"),e("span",{staticClass:"line-number"},[a._v("32")]),e("br"),e("span",{staticClass:"line-number"},[a._v("33")]),e("br"),e("span",{staticClass:"line-number"},[a._v("34")]),e("br"),e("span",{staticClass:"line-number"},[a._v("35")]),e("br"),e("span",{staticClass:"line-number"},[a._v("36")]),e("br"),e("span",{staticClass:"line-number"},[a._v("37")]),e("br"),e("span",{staticClass:"line-number"},[a._v("38")]),e("br")])]),e("p",[a._v("参数说明：")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("-t")]),a._v(" ：指定要创建的目标镜像名")]),a._v(" "),e("li",[e("code",[a._v(".")]),a._v(" ：Dockerfile 文件所在目录，可以指定Dockerfile 的绝对路径")])]),a._v(" "),e("p",[a._v("使用docker images 查看创建的镜像已经在列表中存在,镜像ID为a733d5a264b5")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai docker-test]# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\npdai/ubuntu         v2.0.1              a733d5a264b5        5 minutes ago       92.5MB\npdai/ubuntu         v1.0.1              b51e9f5f98cd        15 hours ago        92.1MB\nmysql               latest              791b6e40940c        2 weeks ago         465MB\nubuntu              latest              ccc6e87d482b        4 weeks ago         64.2MB\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br")])]),e("p",[a._v("我们可以使用新的镜像来创建容器")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai docker-test]# docker run -it pdai/ubuntu:v2.0.1 /bin/bash\nroot@f5332ebce695:/# id pdai\nuid=1000(pdai) gid=1000(pdai) groups=1000(pdai)\nroot@f5332ebce695:/# exit\nexit\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("p",[a._v("从上面看到新镜像已经包含我们创建的用户 pdai。")]),a._v(" "),e("h3",{attrs:{id:"镜像标签"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#镜像标签"}},[a._v("#")]),a._v(" 镜像标签")]),a._v(" "),e("blockquote",[e("p",[a._v("设置镜像的Tag，类似于Git中tag？我们可以使用 docker tag 命令，为镜像添加一个新的标签")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai ~]# docker tag a733d5a264b5 pdai/ubuntu:v3.0.1\n[root@pdai ~]# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\npdai/ubuntu         v2.0.1              a733d5a264b5        9 minutes ago       92.5MB\npdai/ubuntu         v3.0.1              a733d5a264b5        9 minutes ago       92.5MB\npdai/ubuntu         v1.0.1              b51e9f5f98cd        15 hours ago        92.1MB\nmysql               latest              791b6e40940c        2 weeks ago         465MB\nubuntu              latest              ccc6e87d482b        4 weeks ago         64.2MB\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br")])]),e("p",[a._v("注意：")]),a._v(" "),e("ul",[e("li",[a._v("docker tag 镜像ID，这里是 a733d5a264b5 ,用户名称、镜像源名(repository name)和新的标签名(tag)。")]),a._v(" "),e("li",[a._v("使用 docker images 命令可以看到，ID为a733d5a264b5的镜像多一个v3.0.1标签。")])]),a._v(" "),e("h3",{attrs:{id:"镜像导出和导入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#镜像导出和导入"}},[a._v("#")]),a._v(" 镜像导出和导入")]),a._v(" "),e("blockquote",[e("p",[a._v("区别于容器的导出和导入")])]),a._v(" "),e("ul",[e("li",[a._v("镜像导出")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai ~]# docker images\ndockREPOSITORY                   TAG                 IMAGE ID            CREATED             SIZE\npdai/ubuntu                  v2.0.2              57544a04cd1a        3 months ago        91.5MB\n[root@pdai ~]# docker save > pdai-ubuntu-v2.0.2.tar 57544a04cd1a\n[root@pdai ~]# ll | grep pdai-u\n-rw-rw-r-- 1 root root 93898240 Jun  4 09:06 pdai-ubuntu-v2.0.2.tar\n[root@pdai ~]#\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br")])]),e("ul",[e("li",[a._v("镜像导入")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("docker load < pdai-ubuntu-v2.0.2.tar\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br")])]),e("p",[a._v("其中"),e("code",[a._v("-i")]),a._v("或者"),e("code",[a._v("<")]),a._v("表示从文件输入。会成功导入镜像及相关元数据，包括tag信息")]),a._v(" "),e("blockquote",[e("p",[a._v("可以依据具体使用场景来选择命令")])]),a._v(" "),e("ul",[e("li",[a._v("若是只想备份images，使用save、load即可")]),a._v(" "),e("li",[a._v("若是在启动容器后，容器内容有变化，需要备份，则使用export、import")])]),a._v(" "),e("h2",{attrs:{id:"docker-容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-容器"}},[a._v("#")]),a._v(" Docker 容器")]),a._v(" "),e("blockquote",[e("p",[a._v("上面已经展示了部分容器的使用命令了，这里会在此基础上进行拓展")])]),a._v(" "),e("h3",{attrs:{id:"容器启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器启动"}},[a._v("#")]),a._v(" 容器启动")]),a._v(" "),e("p",[a._v("首先我们是可以这样启动容器的：")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai docker-test]# docker run -it pdai/ubuntu:v2.0.1 /bin/bash\nroot@f5332ebce695:/# id pdai\nuid=1000(pdai) gid=1000(pdai) groups=1000(pdai)\nroot@f5332ebce695:/# exit\nexit\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("ul",[e("li",[e("code",[a._v("-it")]),a._v(" 可以连写的，表示 "),e("code",[a._v("-i -t")])]),a._v(" "),e("li",[e("code",[a._v("-t")]),a._v(": 在新容器内指定一个伪终端或终端。")]),a._v(" "),e("li",[e("code",[a._v("-i")]),a._v(": 允许你对容器内的标准输入 (STDIN) 进行交互")])]),a._v(" "),e("h3",{attrs:{id:"容器查看"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器查看"}},[a._v("#")]),a._v(" 容器查看")]),a._v(" "),e("ul",[e("li",[e("code",[a._v("-a")]),a._v(" 表示 all，所有的")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('[root@pdai ~]# docker ps -a\nCONTAINER ID        IMAGE                COMMAND                  CREATED             STATUS                      PORTS               NAMES\nf5332ebce695        pdai/ubuntu:v2.0.1   "/bin/bash"              20 minutes ago      Exited (0) 20 minutes ago                       jolly_kepler\n0a1556ca3c27        ubuntu:latest        "/bin/bash"              16 hours ago        Exited (0) 16 hours ago                         stoic_hodgkin\n1a51d2f023c9        ubuntu:latest        "/bin/sh -c \'while t…"   18 hours ago        Exited (137) 18 hours ago                       gifted_brown\n414bf796cbe4        ubuntu:latest        "/bin/bash"              18 hours ago        Exited (0) 18 hours ago                         pedantic_galileo\n512061ebfa4c        ubuntu:latest        "/bin/bash"              18 hours ago        Exited (0) 18 hours ago                         wizardly_brown\naa5e9ae5e5db        ubuntu:latest        "/bin/echo \'Hello wo…"   18 hours ago        Exited (0) 18 hours ago                         affectionate_knuth\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br")])]),e("h3",{attrs:{id:"容器再启动"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器再启动"}},[a._v("#")]),a._v(" 容器再启动")]),a._v(" "),e("blockquote",[e("p",[a._v("我们看到，刚才"),e("code",[a._v("pdai/ubuntu:v2.0.1")]),a._v("的实例"),e("code",[a._v("f5332ebce695")]),a._v("已经停止了"),e("code",[a._v("Exited (0) 20 minutes ago")]),a._v("，我们能否再启这个实例？")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('[root@pdai ~]# docker start f5332ebce695\nf5332ebce695\n[root@pdai ~]# docker ps\nCONTAINER ID        IMAGE                COMMAND             CREATED             STATUS              PORTS               NAMES\nf5332ebce695        pdai/ubuntu:v2.0.1   "/bin/bash"         32 minutes ago      Up 4 seconds        22/tcp, 80/tcp      jolly_kepler\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br")])]),e("h3",{attrs:{id:"容器停止和重启"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器停止和重启"}},[a._v("#")]),a._v(" 容器停止和重启")]),a._v(" "),e("blockquote",[e("p",[a._v("我们将上述容器停止，再重启")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('[root@pdai ~]# docker stop f5332ebce695\nf5332ebce695\n[root@pdai ~]# docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n[root@pdai ~]# docker restart f5332ebce695\nf5332ebce695\n[root@pdai ~]# docker ps -a\nCONTAINER ID        IMAGE                COMMAND                  CREATED             STATUS                      PORTS               NAMES\nf5332ebce695        pdai/ubuntu:v2.0.1   "/bin/bash"              33 minutes ago      Up 2 seconds                22/tcp, 80/tcp      jolly_kepler\n0a1556ca3c27        ubuntu:latest        "/bin/bash"              16 hours ago        Exited (0) 16 hours ago                         stoic_hodgkin\n1a51d2f023c9        ubuntu:latest        "/bin/sh -c \'while t…"   18 hours ago        Exited (137) 18 hours ago                       gifted_brown\n414bf796cbe4        ubuntu:latest        "/bin/bash"              18 hours ago        Exited (0) 18 hours ago                         pedantic_galileo\n512061ebfa4c        ubuntu:latest        "/bin/bash"              18 hours ago        Exited (0) 18 hours ago                         wizardly_brown\naa5e9ae5e5db        ubuntu:latest        "/bin/echo \'Hello wo…"   19 hours ago        Exited (0) 19 hours ago                         affectionate_knuth\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br")])]),e("h3",{attrs:{id:"后台模式与进入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#后台模式与进入"}},[a._v("#")]),a._v(" 后台模式与进入")]),a._v(" "),e("blockquote",[e("p",[a._v("在使用 -d 参数时，容器启动后会进入后台, 如何进入容器呢？")])]),a._v(" "),e("ul",[e("li",[a._v("第一种："),e("code",[a._v("docker attach")])])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai ~]# docker ps\nCONTAINER ID        IMAGE                COMMAND             CREATED             STATUS              PORTS               NAMES\nf5332ebce695        pdai/ubuntu:v2.0.1   \"/bin/bash\"         38 minutes ago      Up 2 seconds        22/tcp, 80/tcp      jolly_kepler\n[root@pdai ~]# docker attach f5332ebce695\nroot@f5332ebce695:/# echo 'pdai'\npdai\nroot@f5332ebce695:/# exit\nexit\n[root@pdai ~]# docker ps\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br")])]),e("p",[a._v("看到没，使用"),e("code",[a._v("docker attach")]),a._v("进入后，exit便容器也停止了。")]),a._v(" "),e("ul",[e("li",[a._v("第二种："),e("code",[a._v("docker exec")])])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('[root@pdai ~]# docker exec -it f5332ebce695 /bin/bash\nError response from daemon: Container f5332ebce69520fba353f035ccddd4bd42055fbd1e595f916ba7233e26476464 is not running\n[root@pdai ~]# docker restart f5332ebce695\nf5332ebce695\n[root@pdai ~]# docker exec -it f5332ebce695 /bin/bash\nroot@f5332ebce695:/# exit\nexit\n[root@pdai ~]# docker ps\nCONTAINER ID        IMAGE                COMMAND             CREATED             STATUS              PORTS               NAMES\nf5332ebce695        pdai/ubuntu:v2.0.1   "/bin/bash"         42 minutes ago      Up 8 seconds        22/tcp, 80/tcp      jolly_kepler\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br")])]),e("p",[a._v("注意：")]),a._v(" "),e("ul",[e("li",[a._v("我特意在容器停止状态下执行了"),e("code",[a._v("docker exec")]),a._v("，是让你看到"),e("code",[a._v("docker exec")]),a._v("是在容器启动状态下用的，且注意下错误信息；")]),a._v(" "),e("li",[a._v("推荐大家使用 "),e("code",[a._v("docker exec")]),a._v(" 命令，因为此退出容器终端，不会导致容器的停止。")])]),a._v(" "),e("h3",{attrs:{id:"容器导出和导入"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器导出和导入"}},[a._v("#")]),a._v(" 容器导出和导入")]),a._v(" "),e("blockquote",[e("p",[a._v("在生产环境中，很多时候是无法连接外网的，所以有时候需要用到容器的导入和导出。")])]),a._v(" "),e("ul",[e("li",[a._v("容器的导出")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('[root@pdai ~]# docker ps\nCONTAINER ID        IMAGE                COMMAND             CREATED             STATUS              PORTS               NAMES\nf5332ebce695        pdai/ubuntu:v2.0.1   "/bin/bash"         42 minutes ago      Up 8 seconds        22/tcp, 80/tcp      jolly_kepler\n[root@pdai ~]# docker export f5332ebce695 > ubuntu-pdai-v2.tar\n[root@pdai ~]# ll\n-rw-rw-r-- 1 root root 93891072 Feb 18 09:42 ubuntu-pdai-v2.tar\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br")])]),e("p",[a._v("同时你可以发现，导出容器的时候，容器无需关闭。")]),a._v(" "),e("ul",[e("li",[a._v("容器导入")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai ~]# docker import ubuntu-pdai-v2.tar pdai/ubuntu:v2.0.2\nsha256:57544a04cd1ad330371ca9142184ff031dc2b6df70df177994477c08fe547b25\n[root@pdai ~]# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\npdai/ubuntu         v2.0.2              57544a04cd1a        7 seconds ago       91.5MB\npdai/ubuntu         v2.0.1              a733d5a264b5        About an hour ago   92.5MB\npdai/ubuntu         v3.0.1              a733d5a264b5        About an hour ago   92.5MB\npdai/ubuntu         v1.0.1              b51e9f5f98cd        16 hours ago        92.1MB\nmysql               latest              791b6e40940c        2 weeks ago         465MB\nubuntu              latest              ccc6e87d482b        4 weeks ago         64.2MB\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br")])]),e("p",[a._v("注意看，SIZE可能是不一样的。")]),a._v(" "),e("h3",{attrs:{id:"强制停止容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#强制停止容器"}},[a._v("#")]),a._v(" 强制停止容器")]),a._v(" "),e("blockquote",[e("p",[a._v("能否强制删除一个正在运行的容器呢？")])]),a._v(" "),e("p",[a._v("显然，加上"),e("code",[a._v("-f")]),a._v("之后是允许的。")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('[root@pdai ~]# docker ps\nCONTAINER ID        IMAGE                COMMAND             CREATED             STATUS              PORTS               NAMES\nf5332ebce695        pdai/ubuntu:v2.0.1   "/bin/bash"         About an hour ago   Up 24 minutes       22/tcp, 80/tcp      jolly_kepler\n[root@pdai ~]# docker rm -f f5332ebce695\nf5332ebce695\n[root@pdai ~]# docker ps -a\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                      PORTS               NAMES\n0a1556ca3c27        ubuntu:latest       "/bin/bash"              17 hours ago        Exited (0) 17 hours ago                         stoic_hodgkin\n1a51d2f023c9        ubuntu:latest       "/bin/sh -c \'while t…"   19 hours ago        Exited (137) 19 hours ago                       gifted_brown\n414bf796cbe4        ubuntu:latest       "/bin/bash"              19 hours ago        Exited (0) 19 hours ago                         pedantic_galileo\n512061ebfa4c        ubuntu:latest       "/bin/bash"              19 hours ago        Exited (0) 19 hours ago                         wizardly_brown\naa5e9ae5e5db        ubuntu:latest       "/bin/echo \'Hello wo…"   19 hours ago        Exited (0) 19 hours ago                         affectionate_knuth\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br")])]),e("h3",{attrs:{id:"清理停止的容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#清理停止的容器"}},[a._v("#")]),a._v(" 清理停止的容器")]),a._v(" "),e("blockquote",[e("p",[a._v("我们看到上面还有好几个容器出于停止状态，能不能删除它们呢？")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('[root@pdai ~]# docker ps -a\nCONTAINER ID        IMAGE               COMMAND                  CREATED             STATUS                      PORTS               NAMES\n0a1556ca3c27        ubuntu:latest       "/bin/bash"              17 hours ago        Exited (0) 17 hours ago                         stoic_hodgkin\n1a51d2f023c9        ubuntu:latest       "/bin/sh -c \'while t…"   19 hours ago        Exited (137) 19 hours ago                       gifted_brown\n414bf796cbe4        ubuntu:latest       "/bin/bash"              19 hours ago        Exited (0) 19 hours ago                         pedantic_galileo\n512061ebfa4c        ubuntu:latest       "/bin/bash"              19 hours ago        Exited (0) 19 hours ago                         wizardly_brown\naa5e9ae5e5db        ubuntu:latest       "/bin/echo \'Hello wo…"   19 hours ago        Exited (0) 19 hours ago                         affectionate_knuth\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br")])]),e("p",[a._v("清理停止的容器: "),e("code",[a._v("docker container prune")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai ~]# docker container prune\nWARNING! This will remove all stopped containers.\nAre you sure you want to continue? [y/N] y\nDeleted Containers:\n0a1556ca3c275cc692ecd6d19caed4c5be42578f81b3dfea52b24208790d160a\n1a51d2f023c947f2be2d9a78eb863e854ca302c89bf354654c409e23e7dd25d7\n414bf796cbe403e01b5414f2b6232c6a037af78deee4581f4935c94859b5164e\n512061ebfa4c340eb03833e54d77052e33fb62cd42ab7dd7e09bf0b02a761552\naa5e9ae5e5db1760bdb8c7ddb92e4293cd7b4736be7e97314f3ef44a71bf8930\n\nTotal reclaimed space: 27.93MB\n[root@pdai ~]# docker ps -a\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br")])]),e("h3",{attrs:{id:"容器别名及操作"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器别名及操作"}},[a._v("#")]),a._v(" 容器别名及操作")]),a._v(" "),e("blockquote",[e("p",[a._v("我们上述对容器的操作都是针对容器ID，这个ID是随机的，能否添加一个name对我们自己设置的name操作呢？")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('[root@pdai ~]# docker run -itd --name pdai-ubuntu-202 pdai/ubuntu:v2.0.2 /bin/bash\n11de9755a08402d963d263a559a7daf48f4a2188398f258641240b5eb50fbc89\n[root@pdai ~]# docker ps\nCONTAINER ID        IMAGE                COMMAND             CREATED             STATUS              PORTS               NAMES\n11de9755a084        pdai/ubuntu:v2.0.2   "/bin/bash"         5 seconds ago       Up 4 seconds                            pdai-ubuntu-202\n[root@pdai ~]# docker stop pdai-ubuntu-202\npdai-ubuntu-202\n[root@pdai ~]# docker ps -a\nCONTAINER ID        IMAGE                COMMAND              CREATED              STATUS                     PORTS               NAMES\n11de9755a084        pdai/ubuntu:v2.0.2   "/bin/bash"          26 seconds ago       Exited (0) 4 seconds ago                       pdai-ubuntu-202   \n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br")])]),e("h3",{attrs:{id:"容器错误日志"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器错误日志"}},[a._v("#")]),a._v(" 容器错误日志")]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v('例：实时查看docker容器名为user-uat的最后10行日志\ndocker logs -f -t --tail 10 user-uat\n\n例：查看指定时间后的日志，只显示最后100行：\ndocker logs -f -t --since="2018-02-08" --tail=100 user-uat\n\n例：查看最近30分钟的日志:\ndocker logs --since 30m user-uat\n\n例：查看某时间之后的日志：\ndocker logs -t --since="2018-02-08T13:23:37" user-uat\n\n例：查看某时间段日志：\ndocker logs -t --since="2018-02-08T13:23:37" --until "2018-02-09T12:23:37" user-uat\n\n例：将错误日志写入文件：\ndocker logs -f -t --since="2018-02-18" user-uat | grep error >> logs_error.txt\n')])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br"),e("span",{staticClass:"line-number"},[a._v("11")]),e("br"),e("span",{staticClass:"line-number"},[a._v("12")]),e("br"),e("span",{staticClass:"line-number"},[a._v("13")]),e("br"),e("span",{staticClass:"line-number"},[a._v("14")]),e("br"),e("span",{staticClass:"line-number"},[a._v("15")]),e("br"),e("span",{staticClass:"line-number"},[a._v("16")]),e("br"),e("span",{staticClass:"line-number"},[a._v("17")]),e("br")])]),e("h2",{attrs:{id:"docker-仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-仓库"}},[a._v("#")]),a._v(" Docker 仓库")]),a._v(" "),e("p",[a._v("仓库（Repository）是集中存放镜像的地方，它和我们的Maven仓库是一样的。以下介绍一下 Docker Hub。当然不止 docker hub，只是远程的服务商不一样，操作都是一样的。")]),a._v(" "),e("ul",[e("li",[a._v("可以采用共有的仓库，也可以自己搭建Docker Registry;")]),a._v(" "),e("li",[a._v("如果之前有自己的Artifactory或者Nexus，它们同样可以支持Docker Registry功能;")]),a._v(" "),e("li",[a._v("带界面的也可以使用Harbor等;")])]),a._v(" "),e("h3",{attrs:{id:"公有仓库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#公有仓库"}},[a._v("#")]),a._v(" 公有仓库")]),a._v(" "),e("blockquote",[e("p",[a._v("我们以官方的docker hub为例，进行注册和理解。很多人会说官方的速度极慢或者私有仓库上传慢，不试试你怎么知道呢？")])]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("注册官方docker hub")]),a._v("，最新的名字叫docker cloud")])]),a._v(" "),e("p",[e("a",{attrs:{href:"https://hub.docker.com/",target:"_blank",rel:"noopener noreferrer"}},[a._v("https://hub.docker.com/  (opens new window)"),e("OutboundLink")],1)]),a._v(" "),e("p",[a._v("我注册的用户名是 realpdai")]),a._v(" "),e("ul",[e("li",[e("strong",[a._v("本地登录")]),a._v("刚才注册的账户")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai ~]# docker login\nLogin with your Docker ID to push and pull images from Docker Hub. If you don't have a Docker ID, head over to https://hub.docker.com to create one.\nUsername: realpdai\nPassword:\nWARNING! Your password will be stored unencrypted in /root/.docker/config.json.\nConfigure a credential helper to remove this warning. See\nhttps://docs.docker.com/engine/reference/commandline/login/#credentials-store\n\nLogin Succeeded\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br")])]),e("ul",[e("li",[e("strong",[a._v("镜像准备")])])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai ~]# docker tag pdai/ubuntu:v2.0.2 realpdai/ubuntu:v2.0.2\n[root@pdai ~]# docker images\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\npdai/ubuntu         v2.0.2              57544a04cd1a        4 hours ago         91.5MB\nrealpdai/ubuntu     v2.0.2              57544a04cd1a        4 hours ago         91.5MB\npdai/ubuntu         v2.0.1              a733d5a264b5        5 hours ago         92.5MB\npdai/ubuntu         v3.0.1              a733d5a264b5        5 hours ago         92.5MB\npdai/ubuntu         v1.0.1              b51e9f5f98cd        21 hours ago        92.1MB\nmysql               latest              791b6e40940c        2 weeks ago         465MB\nubuntu              latest              ccc6e87d482b        4 weeks ago         64.2MB\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br"),e("span",{staticClass:"line-number"},[a._v("5")]),e("br"),e("span",{staticClass:"line-number"},[a._v("6")]),e("br"),e("span",{staticClass:"line-number"},[a._v("7")]),e("br"),e("span",{staticClass:"line-number"},[a._v("8")]),e("br"),e("span",{staticClass:"line-number"},[a._v("9")]),e("br"),e("span",{staticClass:"line-number"},[a._v("10")]),e("br")])]),e("ul",[e("li",[a._v("推送至Docker Hub服务器")])]),a._v(" "),e("div",{staticClass:"language- line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-text"}},[e("code",[a._v("[root@pdai ~]# docker push realpdai/ubuntu:v2.0.2\nThe push refers to repository [docker.io/realpdai/ubuntu]\n9a2c43cbe02a: Pushed\nv2.0.2: digest: sha256:4afd82dd05d0b4a340ae4f4129dcbd63136b5ec7ff92edf313108a41fb0947e0 size: 528\n")])]),a._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[a._v("1")]),e("br"),e("span",{staticClass:"line-number"},[a._v("2")]),e("br"),e("span",{staticClass:"line-number"},[a._v("3")]),e("br"),e("span",{staticClass:"line-number"},[a._v("4")]),e("br")])]),e("p",[a._v("从推送的速度来看，大概是1.5MB/s。")]),a._v(" "),e("ul",[e("li",[e("p",[a._v("服务器端查看")]),a._v(" "),e("p",[e("img",{attrs:{src:"https://gitee.com/wcy_dch/images/raw/master/img/20211019173529.png",alt:"img"}})])])])])}),[],!1,null,null,null);s.default=t.exports}}]);