(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{467:function(s,e,t){"use strict";t.r(e);var n=t(8),r=Object(n.a)({},(function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("blockquote",[t("p",[s._v("https://www.bilibili.com/video/BV1vt4y1i7zA?from=search&seid=13091247183594790798&spm_id_from=333.337.0.0")])]),s._v(" "),t("h1",{attrs:{id:"springsecurity"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#springsecurity"}},[s._v("#")]),s._v(" SpringSecurity")]),s._v(" "),t("h2",{attrs:{id:"_1-springsecurity是干嘛的"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-springsecurity是干嘛的"}},[s._v("#")]),s._v(" 1.SpringSecurity是干嘛的")]),s._v(" "),t("p",[s._v("Spring Security是spring采用AOP思想，基于servlet过滤器实现的安全框架。它提供了完善的认证机制和方法级的 授权功能。是一款非常优秀的权限管理框架。")]),s._v(" "),t("h2",{attrs:{id:"_2-ssm搭建springsecurity入门案例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-ssm搭建springsecurity入门案例"}},[s._v("#")]),s._v(" 2.SSM搭建SpringSecurity入门案例")]),s._v(" "),t("h3",{attrs:{id:"_1-首先要有ssm的基础环境"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-首先要有ssm的基础环境"}},[s._v("#")]),s._v(" 1.首先要有SSM的基础环境")]),s._v(" "),t("h3",{attrs:{id:"_2-导入依赖"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-导入依赖"}},[s._v("#")]),s._v(" 2.导入依赖")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("<dependency>\n    <groupId>org.springframework.security</groupId>\n    <artifactId>spring-security-taglibs</artifactId>\n    <version>5.1.5.RELEASE</version>\n</dependency>\n<dependency>\n    <groupId>org.springframework.security</groupId>\n    <artifactId>spring-security-config</artifactId>\n    <version>5.1.5.RELEASE</version>\n</dependency>\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])]),t("h3",{attrs:{id:"_3-配置web-xml文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-配置web-xml文件"}},[s._v("#")]),s._v(" 3.配置web.xml文件")]),s._v(" "),t("ul",[t("li",[s._v("配置springSecurity的过滤器")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('<web-app xmlns="http://java.sun.com/xml/ns/javaee"\n    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee\n    http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd"\n    version="3.0">\n    <display-name>Archetype Created Web Application</display-name>\n    \x3c!--Spring Security过滤器链，注意过滤器名称必须叫springSecurityFilterChain--\x3e\n    <filter>\n        <filter-name>springSecurityFilterChain</filter-name>\n        <filter-class>org.springframework.web.filter.DelegatingFilterProxy</filter-class>\n    </filter>\n    <filter-mapping>\n        <filter-name>springSecurityFilterChain</filter-name>\n        <url-pattern>/*</url-pattern>\n    </filter-mapping>\n</web-app>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h3",{attrs:{id:"_4-配置spring-security-xml"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-配置spring-security-xml"}},[s._v("#")]),s._v(" 4.配置spring-security.xml")]),s._v(" "),t("ul",[t("li",[s._v("配置要拦截的url，需要哪些权限")]),s._v(" "),t("li",[s._v("security:authentication-manager:固定用户认证信息，通过账号user密码user进行登录")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xmlns:aop="http://www.springframework.org/schema/aop"\n       xmlns:tx="http://www.springframework.org/schema/tx"\n       xmlns:security="http://www.springframework.org/schema/security"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context.xsd\n    http://www.springframework.org/schema/aop\n    http://www.springframework.org/schema/aop/spring-aop.xsd\n    http://www.springframework.org/schema/tx\n    http://www.springframework.org/schema/tx/spring-tx.xsd\n    http://www.springframework.org/schema/security\n    http://www.springframework.org/schema/security/spring-security.xsd">\n    \x3c!--设置可以用spring的el表达式配置Spring Security并自动生成对应配置组件（过滤器）--\x3e\n    <security:http auto-config="true" use-expressions="true">\n        \x3c!--使用spring的el表达式来指定项目所有资源访问都必须有ROLE_USER或ROLE_ADMIN角色--\x3e\n        <security:intercept-url pattern="/**" access="hasAnyRole(\'ROLE_USER\',\'ROLE_ADMIN\')"/>\n    </security:http>\n\n    \x3c!--设置Spring Security认证用户信息的来源--\x3e\n    <security:authentication-manager>\n        <security:authentication-provider>\n            <security:user-service>\n                <security:user name="user" password="{noop}user"\n                               authorities="ROLE_USER" />\n                <security:user name="admin" password="{noop}admin"\n                               authorities="ROLE_ADMIN" />\n            </security:user-service>\n        </security:authentication-provider>\n    </security:authentication-manager>\n</beans>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br")])]),t("h3",{attrs:{id:"_5-spring引入security配置文件"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-spring引入security配置文件"}},[s._v("#")]),s._v(" 5.spring引入security配置文件")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    \x3c!--引入SpringSecurity主配置文件--\x3e\n    <import resource="classpath:spring-security.xml"/>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"_6-启动项目"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-启动项目"}},[s._v("#")]),s._v(" 6.启动项目")]),s._v(" "),t("p",[s._v("好了！开始启动项目了，万众期待看到index.jsp中的内容！")]),s._v(" "),t("blockquote",[t("p",[s._v("会被拦截，跳转到security自带的登录页面")]),s._v(" "),t("p",[s._v("我们在这个登录页面上输入用户名user，密码user，点击Sign in，好了，总算再次看到首页了！")])]),s._v(" "),t("h2",{attrs:{id:"_3-spring-security常用过滤器介绍"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-spring-security常用过滤器介绍"}},[s._v("#")]),s._v(" 3.spring Security常用过滤器介绍")]),s._v(" "),t("p",[s._v("过滤器是一种典型的AOP思想，关于什么是过滤器，就不赘述了，谁还不知道凡是web工程都能用过滤器？\n接下来咱们就一起看看Spring Security中这些过滤器都是干啥用的，源码我就不贴出来了，有名字，大家可以自\n己在idea中Double Shift去。我也会在后续的学习过程中穿插详细解释。")]),s._v(" "),t("ol",[t("li",[s._v("org.springframework.security.web.context.SecurityContextPersistenceFilter\n首当其冲的一个过滤器，作用之重要，自不必多言。\nSecurityContextPersistenceFilter主要是使用SecurityContextRepository在session中保存或更新一个\nSecurityContext，并将SecurityContext给以后的过滤器使用，来为后续filter建立所需的上下文。\nSecurityContext中存储了当前用户的认证以及权限信息。")]),s._v(" "),t("li",[s._v("org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter\n此过滤器用于集成SecurityContext到Spring异步执行机制中的WebAsyncManager")]),s._v(" "),t("li",[s._v("org.springframework.security.web.header.HeaderWriterFilter\n向请求的Header中添加相应的信息,可在http标签内部使用security:headers来控制")]),s._v(" "),t("li",[s._v("org.springframework.security.web.csrf.CsrfFilter\ncsrf又称跨域请求伪造，SpringSecurity会对所有post请求验证是否包含系统生成的csrf的token信息，\n如果不包含，则报错。起到防止csrf攻击的效果。")]),s._v(" "),t("li",[s._v("org.springframework.security.web.authentication.logout.LogoutFilter\n匹配URL为/logout的请求，实现用户退出,清除认证信息。")]),s._v(" "),t("li",[s._v("org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter\n认证操作全靠这个过滤器，默认匹配URL为/login且必须为POST请求。")]),s._v(" "),t("li",[s._v("org.springframework.security.web.authentication.ui.DefaultLoginPageGeneratingFilter\n如果没有在配置文件中指定认证页面，则由该过滤器生成一个默认认证页面。")]),s._v(" "),t("li",[s._v("org.springframework.security.web.authentication.ui.DefaultLogoutPageGeneratingFilter\n由此过滤器可以生产一个默认的退出登录页面")]),s._v(" "),t("li",[s._v("org.springframework.security.web.authentication.www.BasicAuthenticationFilter\n此过滤器会自动解析HTTP请求中头部名字为Authentication，且以Basic开头的头信息。")]),s._v(" "),t("li",[s._v("org.springframework.security.web.savedrequest.RequestCacheAwareFilter\n通过HttpSessionRequestCache内部维护了一个RequestCache，用于缓存HttpServletRequest")]),s._v(" "),t("li",[s._v("org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter\n针对ServletRequest进行了一次包装，使得request具有更加丰富的API")]),s._v(" "),t("li",[s._v("org.springframework.security.web.authentication.AnonymousAuthenticationFilter\n当SecurityContextHolder中认证信息为空,则会创建一个匿名用户存入到SecurityContextHolder中。\nspring security为了兼容未登录的访问，也走了一套认证流程，只不过是一个匿名的身份。")]),s._v(" "),t("li",[s._v("org.springframework.security.web.session.SessionManagementFilter\nSecurityContextRepository限制同一用户开启多个会话的数量")]),s._v(" "),t("li",[s._v("org.springframework.security.web.access.ExceptionTranslationFilter\n异常转换过滤器位于整个springSecurityFilterChain的后方，用来转换整个链路中出现的异常")]),s._v(" "),t("li",[s._v("org.springframework.security.web.access.intercept.FilterSecurityInterceptor\n获取所配置资源访问的授权信息，根据SecurityContextHolder中存储的用户信息来决定其是否有权\n限。")])]),s._v(" "),t("h2",{attrs:{id:"_4-spring-security过滤器链加载原理"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-spring-security过滤器链加载原理"}},[s._v("#")]),s._v(" 4. spring security过滤器链加载原理")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("根据web.xml文件中配置的security的org.springframework.web.filter.DelegatingFilterProxy过滤器")])]),s._v(" "),t("li",[t("p",[s._v("找到DelegatingFilterProxy该类的doFilter方法this.initDelegate(wac);")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    public void doFilter(ServletRequest request, ServletResponse response, FilterChain filterChain) throws ServletException, IOException {\n        Filter delegateToUse = this.delegate;\n        if (delegateToUse == null) {\n            synchronized(this.delegateMonitor) {\n                delegateToUse = this.delegate;\n                if (delegateToUse == null) {\n                    WebApplicationContext wac = this.findWebApplicationContext();\n                    if (wac == null) {\n                        throw new IllegalStateException("No WebApplicationContext found: no ContextLoaderListener or DispatcherServlet registered?");\n                    }\n\t\t\t\t\t//初始化过滤器\n                    delegateToUse = this.initDelegate(wac);\n                }\n\n                this.delegate = delegateToUse;\n            }\n        }\n\n        this.invokeDelegate(delegateToUse, request, response, filterChain);\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("Filter delegate = (Filter)wac.getBean(targetBeanName, Filter.class);获取了一个Filter")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    protected Filter initDelegate(WebApplicationContext wac) throws ServletException {\n        String targetBeanName = this.getTargetBeanName();\n        Assert.state(targetBeanName != null, "No target bean name set");\n        Filter delegate = (Filter)wac.getBean(targetBeanName, Filter.class);\n        if (this.isTargetFilterLifecycle()) {\n            delegate.init(this.getFilterConfig());\n        }\n\n        return delegate;\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("打个断电")]),s._v(" "),t("p",[t("img",{attrs:{src:"https://gitee.com/wcy_dch/images/raw/master/img/image-20210906163947468.png",alt:"image-20210906163947468"}})])]),s._v(" "),t("li",[t("p",[s._v("idea搜索org.springframework.security.filterChainProxy")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    private void doFilterInternal(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {\n        FirewalledRequest fwRequest = this.firewall.getFirewalledRequest((HttpServletRequest)request);\n        HttpServletResponse fwResponse = this.firewall.getFirewalledResponse((HttpServletResponse)response);\n        //获取所有的过滤器\n        List<Filter> filters = this.getFilters((HttpServletRequest)fwRequest);\n        if (filters != null && filters.size() != 0) {\n            FilterChainProxy.VirtualFilterChain vfc = new FilterChainProxy.VirtualFilterChain(fwRequest, chain, filters);\n            vfc.doFilter(fwRequest, fwResponse);\n        } else {\n            if (logger.isDebugEnabled()) {\n                logger.debug(UrlUtils.buildRequestUrl(fwRequest) + (filters == null ? " has no matching filters" : " has an empty filter list"));\n            }\n\n            fwRequest.reset();\n            chain.doFilter(fwRequest, fwResponse);\n        }\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    //每个过滤器都放在filterChains中\n    private List<SecurityFilterChain> filterChains;\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"_5-使用自定义登录页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_5-使用自定义登录页面"}},[s._v("#")]),s._v(" 5.使用自定义登录页面")]),s._v(" "),t("p",[s._v("修改spring-security.xml配置文件")]),s._v(" "),t("ul",[t("li",[s._v("静态资源不被security拦截")]),s._v(" "),t("li",[s._v("login.jsp页面不被security拦截")]),s._v(" "),t("li",[s._v("配置登录相关配置")]),s._v(" "),t("li",[s._v("配置登出相关配置")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xmlns:aop="http://www.springframework.org/schema/aop"\n       xmlns:tx="http://www.springframework.org/schema/tx"\n       xmlns:security="http://www.springframework.org/schema/security"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context.xsd\n    http://www.springframework.org/schema/aop\n    http://www.springframework.org/schema/aop/spring-aop.xsd\n    http://www.springframework.org/schema/tx\n    http://www.springframework.org/schema/tx/spring-tx.xsd\n    http://www.springframework.org/schema/security\n    http://www.springframework.org/schema/security/spring-security.xsd">\n\n    \x3c!--直接释放无需经过SpringSecurity过滤器的静态资源--\x3e\n    <security:http pattern="/css/**" security="none"/>\n    <security:http pattern="/img/**" security="none"/>\n    <security:http pattern="/plugins/**" security="none"/>\n    <security:http pattern="/failer.jsp" security="none"/>\n    <security:http pattern="/favicon.ico" security="none"/>\n\n\n    \x3c!--设置可以用spring的el表达式配置Spring Security并自动生成对应配置组件（过滤器）--\x3e\n    <security:http auto-config="true" use-expressions="true">\n        \x3c!--指定login.jsp页面可以被匿名访问--\x3e\n        <security:intercept-url pattern="/login.jsp" access="permitAll()"></security:intercept-url>\n\n        \x3c!--使用spring的el表达式来指定项目所有资源访问都必须有ROLE_USER或ROLE_ADMIN角色--\x3e\n        <security:intercept-url pattern="/**" access="hasAnyRole(\'ROLE_USER\')"/>\n\n        \x3c!--指定自定义的认证页面\n            1.login-page="login.jsp"自定义登录页面\n            2.login-processing-url="/login"登录处理的controller请求\n            3.default-target-url="/index.jsp"登陆成功跳转默认页面\n            4.authentication-failure-url="/failer.jsp"没有权限跳转页面\n        --\x3e\n        <security:form-login login-page="/login.jsp"\n            login-processing-url="/login"\n            default-target-url="/index.jsp"\n            authentication-failure-url="/failer.jsp"></security:form-login>\n\n        \x3c!--指定退出登录后跳转的页面\n            1.logout-url="/logout"退出处理的controller请求\n            2.logout-success-url="login.jsp"退出后跳转页面\n        --\x3e\n        <security:logout logout-url="/logout"\n            logout-success-url="/login.jsp"></security:logout>\n    </security:http>\n\n    \x3c!--设置Spring Security认证用户信息的来源--\x3e\n    <security:authentication-manager>\n        <security:authentication-provider>\n            <security:user-service>\n                <security:user name="user" password="{noop}user"\n                               authorities="ROLE_USER" />\n                <security:user name="admin" password="{noop}admin"\n                               authorities="ROLE_ADMIN" />\n            </security:user-service>\n        </security:authentication-provider>\n    </security:authentication-manager>\n</beans>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br")])]),t("p",[s._v("启动上方配置依然没有办法登录成功")]),s._v(" "),t("p",[s._v("所有的post、put、delete请求都会被csrf拦截，必须附带csrf")]),s._v(" "),t("h3",{attrs:{id:"_1-方式一-关闭csrf"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-方式一-关闭csrf"}},[s._v("#")]),s._v(" 1.方式一：关闭csrf")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("修改登录页面的表单处理action")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('<form action="${pageContext.request.contextPath}/login" method="post">\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("关闭csrf")])])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('<?xml version="1.0" encoding="UTF-8"?>\n<beans xmlns="http://www.springframework.org/schema/beans"\n       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"\n       xmlns:context="http://www.springframework.org/schema/context"\n       xmlns:aop="http://www.springframework.org/schema/aop"\n       xmlns:tx="http://www.springframework.org/schema/tx"\n       xmlns:security="http://www.springframework.org/schema/security"\n       xsi:schemaLocation="http://www.springframework.org/schema/beans\n    http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/context\n    http://www.springframework.org/schema/context/spring-context.xsd\n    http://www.springframework.org/schema/aop\n    http://www.springframework.org/schema/aop/spring-aop.xsd\n    http://www.springframework.org/schema/tx\n    http://www.springframework.org/schema/tx/spring-tx.xsd\n    http://www.springframework.org/schema/security\n    http://www.springframework.org/schema/security/spring-security.xsd">\n    \n    \x3c!--设置可以用spring的el表达式配置Spring Security并自动生成对应配置组件（过滤器）--\x3e\n    <security:http auto-config="true" use-expressions="true">\n        \x3c!--关闭csrf--\x3e\n        <security:csrf disabled="true"></security:csrf>\n    </security:http>\n</beans>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br")])]),t("h3",{attrs:{id:"_2-方式二-打开csrf-修改登录页面"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-方式二-打开csrf-修改登录页面"}},[s._v("#")]),s._v(" 2.方式二：打开csrf，修改登录页面")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("打开csrf校验")])]),s._v(" "),t("li",[t("p",[s._v("登录页面添加csf的input框")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('\n<%@taglib uri="http://www.springframework.org/security/tags" prefix="security"%>\n\t\t\x3c!-- /.login-logo --\x3e\n\t\t<div class="login-box-body">\n\t\t\t<p class="login-box-msg">登录系统</p>\n\t\t\t<form action="${pageContext.request.contextPath}/login" method="post">\n\t\t\t\t\x3c!--添加csrf input框--\x3e\n\t\t\t\t<security:csrfInput/>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"_6-注销功能"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_6-注销功能"}},[s._v("#")]),s._v(" 6.注销功能")]),s._v(" "),t("blockquote",[t("p",[s._v("由于开启了csrf，secitity认为logout也应该被csrf校验，所以注销功能也需要为post请求")])]),s._v(" "),t("p",[s._v("登出页面：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('\x3c!--引入csrf标签库--\x3e\n<%@taglib uri="http://www.springframework.org/security/tags" prefix="security"%>\n<form action="${pageContext.request.contextPath}/logout" method="post">\n\t<security:csrfInput/>\n\t<button type="submit">注销</button>\n</form>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h2",{attrs:{id:"_7-自定义认证流程"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_7-自定义认证流程"}},[s._v("#")]),s._v(" 7.自定义认证流程")]),s._v(" "),t("ol",[t("li",[t("p",[s._v("实现UserDetailsService接口即可")]),s._v(" "),t("ul",[t("li",[s._v("查询该用户")]),s._v(" "),t("li",[s._v("获取所有的角色")]),s._v(" "),t("li",[s._v("使用非加密的密码")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('package com.itheima.service.impl;\n\nimport com.itheima.dao.UserDao;\nimport com.itheima.domain.SysRole;\nimport com.itheima.domain.SysUser;\nimport com.itheima.service.RoleService;\nimport com.itheima.service.UserService;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.SimpleGrantedAuthority;\nimport org.springframework.security.core.userdetails.User;\nimport org.springframework.security.core.userdetails.UserDetails;\nimport org.springframework.security.core.userdetails.UsernameNotFoundException;\nimport org.springframework.stereotype.Service;\nimport org.springframework.transaction.annotation.Transactional;\n\nimport java.util.*;\n\n@Service\n@Transactional\npublic class UserServiceImpl implements UserService {\n    @Autowired\n    private UserDao userDao;\n    /**\n     * secutiry的认证方法\n     * @param username\n     * @return\n     * @throws UsernameNotFoundException\n     */\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        SysUser user = userDao.findByName(username);\n        if(user == null){\n            //若用户名不对，直接返回null，表示认证失败。\n            return null;\n        }else{\n            List<SimpleGrantedAuthority> authorities=new ArrayList<SimpleGrantedAuthority>();\n            for(SysRole role:user.getRoles()){\n                authorities.add(new SimpleGrantedAuthority(role.getRoleName()));\n            }\n            //最终需要返回一个SpringSecurity的UserDetails对象，{noop}表示不加密认证。\n            UserDetails userDetails=new User(username,"{noop}"+user.getPassword(),authorities);\n            return userDetails;\n        }\n    }\n}\n\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("security配置自定义的userService")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    \x3c!--设置Spring Security认证用户信息的来源--\x3e\n    <security:authentication-manager>\n        <security:authentication-provider user-service-ref="userServiceImpl">\n\x3c!--            <security:user-service>--\x3e\n\x3c!--                <security:user name="user" password="{noop}user"--\x3e\n\x3c!--                               authorities="ROLE_USER" />--\x3e\n\x3c!--                <security:user name="admin" password="{noop}admin"--\x3e\n\x3c!--                               authorities="ROLE_ADMIN" />--\x3e\n\x3c!--            </security:user-service>--\x3e\n        </security:authentication-provider>\n    </security:authentication-manager>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"_8-使用加密认证"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_8-使用加密认证"}},[s._v("#")]),s._v(" 8.使用加密认证")]),s._v(" "),t("h3",{attrs:{id:"_1-注入security的bcryptpasswordencoder加密工具类"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-注入security的bcryptpasswordencoder加密工具类"}},[s._v("#")]),s._v(" 1.注入security的BCryptPasswordEncoder加密工具类")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    \x3c!--security内置的加密工具类--\x3e\n    <bean id="passwordEncoder" class="org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder"></bean>\n\n    \x3c!--设置Spring Security认证用户信息的来源--\x3e\n    <security:authentication-manager>\n        <security:authentication-provider user-service-ref="userServiceImpl">\n            \x3c!--使用security内置的加密工具类--\x3e\n            <security:password-encoder ref="passwordEncoder"></security:password-encoder>\n\x3c!--            <security:user-service>--\x3e\n\x3c!--                <security:user name="user" password="{noop}user"--\x3e\n\x3c!--                               authorities="ROLE_USER" />--\x3e\n\x3c!--                <security:user name="admin" password="{noop}admin"--\x3e\n\x3c!--                               authorities="ROLE_ADMIN" />--\x3e\n\x3c!--            </security:user-service>--\x3e\n        </security:authentication-provider>\n    </security:authentication-manager>\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br")])]),t("h3",{attrs:{id:"_2-修改认证的方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-修改认证的方法"}},[s._v("#")]),s._v(" 2.修改认证的方法")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    /**\n     * secutiry的认证方法\n     * @param username\n     * @return\n     * @throws UsernameNotFoundException\n     */\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        SysUser user = userDao.findByName(username);\n        if(user == null){\n            //若用户名不对，直接返回null，表示认证失败。\n            return null;\n        }else{\n            List<SimpleGrantedAuthority> authorities=new ArrayList<SimpleGrantedAuthority>();\n            for(SysRole role:user.getRoles()){\n                authorities.add(new SimpleGrantedAuthority(role.getRoleName()));\n            }\n            //最终需要返回一个SpringSecurity的UserDetails对象，{noop}表示不加密认证。\n            UserDetails userDetails=new User(username,user.getPassword(),authorities);\n            return userDetails;\n        }\n    }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br")])]),t("h3",{attrs:{id:"_3-修改用户登录的操作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-修改用户登录的操作"}},[s._v("#")]),s._v(" 3.修改用户登录的操作")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    @Override\n    public void save(SysUser user) {\n        //保存加密的密码\n        user.setPassword(passwordEncoder.encode(user.getPassword()));\n        userDao.save(user);\n    }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"_4-修改数据库的密码"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_4-修改数据库的密码"}},[s._v("#")]),s._v(" 4.修改数据库的密码")]),s._v(" "),t("p",[s._v("自己写个测试类，修改数据库的密码")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('    /**\n     * 每次运行密码都不相同\n     * $2a$10$Swune4iLf8rJx1WNFgUzB.WCqZ2I3Gvg5jX53DVxRU6f.U9YLrMOW\n     * $2a$10$EW4sTDUrDhXZxE5LoEgypOINOFXie9TDKS4iTkZ20Qn4FMaln3l4u\n     * $2a$10$KaskTciynULoM75HyE72VersiOQmuQ0CKKX6qLX8o13.Y0bXbKe3m\n     * @param args\n     */\n    public static void main(String[] args) {\n        BCryptPasswordEncoder encoder=new BCryptPasswordEncoder();\n        System.out.println(encoder.encode("123456"));\n        System.out.println(encoder.matches("123456","$2a$10$KaskTciynULoM75HyE72VersiOQmuQ0CKKX6qLX8o13.Y0bXbKe3m"));\n\n    }\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br")])]),t("p",[t("img",{attrs:{src:"https://gitee.com/wcy_dch/images/raw/master/img/image-20210906204728678.png",alt:"image-20210906204728678"}})]),s._v(" "),t("h2",{attrs:{id:"_9-设置用户状态"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_9-设置用户状态"}},[s._v("#")]),s._v(" 9.设置用户状态")]),s._v(" "),t("p",[s._v("用户认证时封装的UserDetails对应的User的构造方法支持设置用户状态")]),s._v(" "),t("ul",[t("li",[s._v("enabled：是否开启")]),s._v(" "),t("li",[s._v("accountNonExpired：账户是否失效")]),s._v(" "),t("li",[s._v("credentialsNonExpired：密码是否失效")]),s._v(" "),t("li",[s._v("accountNonLocked：账户是否被锁定")])]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        SysUser user = userDao.findByName(username);\n        if(user == null){\n            //若用户名不对，直接返回null，表示认证失败。\n            return null;\n        }else{\n            List<SimpleGrantedAuthority> authorities=new ArrayList<SimpleGrantedAuthority>();\n            for(SysRole role:user.getRoles()){\n                authorities.add(new SimpleGrantedAuthority(role.getRoleName()));\n            }\n            //最终需要返回一个SpringSecurity的UserDetails对象，{noop}表示不加密认证。\n            UserDetails userDetails=new User(username,\n                    user.getPassword(),\n                    authorities);\n            return userDetails;\n        }\n    }\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])]),t("p",[s._v("修改：")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("            //最终需要返回一个SpringSecurity的UserDetails对象，{noop}表示不加密认证。\n            UserDetails userDetails=new User(username,\n                    user.getPassword(),\n                    user.getStatus()==1,//是否启用\n                    true,  //账户是否失效\n                    true,//密码是否失效\n                    true,//账户是否被锁定\n                    authorities);\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h2",{attrs:{id:"_10-remember-me"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-remember-me"}},[s._v("#")]),s._v(" 10.Remember-me")]),s._v(" "),t("h3",{attrs:{id:"_1-源码分析"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-源码分析"}},[s._v("#")]),s._v(" 1.源码分析")]),s._v(" "),t("p",[s._v("1.springSecurity都是通过过滤器实现的，查看RememberMeAuthenticationFilter类")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('public void doFilter(ServletRequest req, ServletResponse res, FilterChain chain)\n\t\t\tthrows IOException, ServletException {\n\t\tHttpServletRequest request = (HttpServletRequest) req;\n\t\tHttpServletResponse response = (HttpServletResponse) res;\n\t\t\n\t\tif (SecurityContextHolder.getContext().getAuthentication() == null) \n\t\t\t//读取是否开启了记住我功能\n\t\t\tAuthentication rememberMeAuth = rememberMeServices.autoLogin(request,\n\t\t\t\t\tresponse);\n\n\t\t\tif (rememberMeAuth != null) {\n\t\t\t\t// Attempt authenticaton via AuthenticationManager\n\t\t\t\ttry {\n\t\t\t\t\t//模拟登陆\n\t\t\t\t\trememberMeAuth = authenticationManager.authenticate(rememberMeAuth);\n\n\t\t\t\t\t// Store to SecurityContextHolder\n\t\t\t\t\tSecurityContextHolder.getContext().setAuthentication(rememberMeAuth);\n\n\t\t\t\t\tonSuccessfulAuthentication(request, response, rememberMeAuth);\n\n\t\t\t\t\tif (logger.isDebugEnabled()) {\n\t\t\t\t\t\tlogger.debug("SecurityContextHolder populated with remember-me token: \'"\n\t\t\t\t\t\t\t\t+ SecurityContextHolder.getContext().getAuthentication()\n\t\t\t\t\t\t\t\t+ "\'");\n\t\t\t\t\t}\n\n\t\t\t\t\t// Fire event\n\t\t\t\t\tif (this.eventPublisher != null) {\n\t\t\t\t\t\teventPublisher\n\t\t\t\t\t\t\t\t.publishEvent(new InteractiveAuthenticationSuccessEvent(\n\t\t\t\t\t\t\t\t\t\tSecurityContextHolder.getContext()\n\t\t\t\t\t\t\t\t\t\t\t\t.getAuthentication(), this.getClass()));\n\t\t\t\t\t}\n\n\t\t\t\t\tif (successHandler != null) {\n\t\t\t\t\t\tsuccessHandler.onAuthenticationSuccess(request, response,\n\t\t\t\t\t\t\t\trememberMeAuth);\n\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t\tcatch (AuthenticationException authenticationException) {\n\t\t\t\t\tif (logger.isDebugEnabled()) {\n\t\t\t\t\t\tlogger.debug(\n\t\t\t\t\t\t\t\t"SecurityContextHolder not populated with remember-me token, as "\n\t\t\t\t\t\t\t\t\t\t+ "AuthenticationManager rejected Authentication returned by RememberMeServices: \'"\n\t\t\t\t\t\t\t\t\t\t+ rememberMeAuth\n\t\t\t\t\t\t\t\t\t\t+ "\'; invalidating remember-me token",\n\t\t\t\t\t\t\t\tauthenticationException);\n\t\t\t\t\t}\n\n\t\t\t\t\trememberMeServices.loginFail(request, response);\n\n\t\t\t\t\tonUnsuccessfulAuthentication(request, response,\n\t\t\t\t\t\t\tauthenticationException);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tchain.doFilter(request, response);\n\t\t}\n\t\telse {\n\t\t\tif (logger.isDebugEnabled()) {\n\t\t\t\tlogger.debug("SecurityContextHolder not populated with remember-me token, as it already contained: \'"\n\t\t\t\t\t\t+ SecurityContextHolder.getContext().getAuthentication() + "\'");\n\t\t\t}\n\n\t\t\tchain.doFilter(request, response);\n\t\t}\n\t}\n\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br"),t("span",{staticClass:"line-number"},[s._v("45")]),t("br"),t("span",{staticClass:"line-number"},[s._v("46")]),t("br"),t("span",{staticClass:"line-number"},[s._v("47")]),t("br"),t("span",{staticClass:"line-number"},[s._v("48")]),t("br"),t("span",{staticClass:"line-number"},[s._v("49")]),t("br"),t("span",{staticClass:"line-number"},[s._v("50")]),t("br"),t("span",{staticClass:"line-number"},[s._v("51")]),t("br"),t("span",{staticClass:"line-number"},[s._v("52")]),t("br"),t("span",{staticClass:"line-number"},[s._v("53")]),t("br"),t("span",{staticClass:"line-number"},[s._v("54")]),t("br"),t("span",{staticClass:"line-number"},[s._v("55")]),t("br"),t("span",{staticClass:"line-number"},[s._v("56")]),t("br"),t("span",{staticClass:"line-number"},[s._v("57")]),t("br"),t("span",{staticClass:"line-number"},[s._v("58")]),t("br"),t("span",{staticClass:"line-number"},[s._v("59")]),t("br"),t("span",{staticClass:"line-number"},[s._v("60")]),t("br"),t("span",{staticClass:"line-number"},[s._v("61")]),t("br"),t("span",{staticClass:"line-number"},[s._v("62")]),t("br"),t("span",{staticClass:"line-number"},[s._v("63")]),t("br"),t("span",{staticClass:"line-number"},[s._v("64")]),t("br"),t("span",{staticClass:"line-number"},[s._v("65")]),t("br"),t("span",{staticClass:"line-number"},[s._v("66")]),t("br"),t("span",{staticClass:"line-number"},[s._v("67")]),t("br"),t("span",{staticClass:"line-number"},[s._v("68")]),t("br"),t("span",{staticClass:"line-number"},[s._v("69")]),t("br"),t("span",{staticClass:"line-number"},[s._v("70")]),t("br"),t("span",{staticClass:"line-number"},[s._v("71")]),t("br"),t("span",{staticClass:"line-number"},[s._v("72")]),t("br")])]),t("p",[s._v("2.rememberMeServices.autoLogin(request,response)方法")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v('public final Authentication autoLogin(HttpServletRequest request,\n\t\t\tHttpServletResponse response) {\n\t\tString rememberMeCookie = extractRememberMeCookie(request);\n\t\t//判断是否有cookie\n\t\tif (rememberMeCookie == null) {\n\t\t\treturn null;\n\t\t}\n\n\t\tlogger.debug("Remember-me cookie detected");\n\n\t\tif (rememberMeCookie.length() == 0) {\n\t\t\tlogger.debug("Cookie was empty");\n\t\t\tcancelCookie(request, response);\n\t\t\treturn null;\n\t\t}\n\n\t\tUserDetails user = null;\n\n\t\ttry {\n\t\t\tString[] cookieTokens = decodeCookie(rememberMeCookie);\n\t\t\tuser = processAutoLoginCookie(cookieTokens, request, response);\n\t\t\tuserDetailsChecker.check(user);\n\n\t\t\tlogger.debug("Remember-me cookie accepted");\n\n\t\t\treturn createSuccessfulAuthentication(request, user);\n\t\t}\n\n\t\tcancelCookie(request, response);\n\t\treturn null;\n\t}\n')])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br")])])])}),[],!1,null,null,null);e.default=r.exports}}]);